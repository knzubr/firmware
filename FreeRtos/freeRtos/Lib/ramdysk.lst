   1               		.file	"ramdysk.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__ = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
  10               		.text
  11               	.Ltext0:
 563               	uaktualnijRozmiarPliku:
 564               		.stabd	46,0,0
   1:../../freeRtos/Lib/ramdysk.c **** #include "ramdysk.h"
   2:../../freeRtos/Lib/ramdysk.c **** #include <string.h>
   3:../../freeRtos/Lib/ramdysk.c **** 
   4:../../freeRtos/Lib/ramdysk.c **** #define systemTime() 0; //Dodać w pliku hardware.h funkcje do odczytu czasu systemowego
   5:../../freeRtos/Lib/ramdysk.c **** 
   6:../../freeRtos/Lib/ramdysk.c **** static uint8_t         znajdzWolnyKlaster(void);
   7:../../freeRtos/Lib/ramdysk.c **** static uint8_t         nastepnyKlaster(uint8_t nrKlastra);
   8:../../freeRtos/Lib/ramdysk.c **** static uint8_t         znajdzKlasterN(uint8_t nrPierwszegoKlastra, uint8_t lPrzeskokow);
   9:../../freeRtos/Lib/ramdysk.c **** #if ( USUNKLASTER == 1)
  10:../../freeRtos/Lib/ramdysk.c **** static uint8_t         usunKlaster(uint8_t nrKlastra);
  11:../../freeRtos/Lib/ramdysk.c **** #endif
  12:../../freeRtos/Lib/ramdysk.c **** static uint8_t         wObrebiePliku(struct ramPlikFd *fd);
  13:../../freeRtos/Lib/ramdysk.c **** static void            uaktualnijRozmiarPliku(struct ramPlikFd *fd);
  14:../../freeRtos/Lib/ramdysk.c **** static struct ramPlik* znajdzPlik(const char *nazwa);
  15:../../freeRtos/Lib/ramdysk.c **** static struct ramPlik* znajdzMiejsceNaWpis(void);
  16:../../freeRtos/Lib/ramdysk.c **** static void            czyscKlaster(uint8_t nrKlastra);
  17:../../freeRtos/Lib/ramdysk.c **** 
  18:../../freeRtos/Lib/ramdysk.c **** static void            czyscKlaster(uint8_t nrKlastra)
  19:../../freeRtos/Lib/ramdysk.c **** {
  20:../../freeRtos/Lib/ramdysk.c ****   uint8_t *tmpPtr = dataPtr(nrKlastra, 0);
  21:../../freeRtos/Lib/ramdysk.c ****   memset (tmpPtr, 0, 256);
  22:../../freeRtos/Lib/ramdysk.c **** }
  23:../../freeRtos/Lib/ramdysk.c **** 
  24:../../freeRtos/Lib/ramdysk.c **** static uint8_t  wObrebiePliku(struct ramPlikFd *fd)
  25:../../freeRtos/Lib/ramdysk.c **** {
  26:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->rozmiarHi > fd->IndHi)
  27:../../freeRtos/Lib/ramdysk.c ****     return 0;
  28:../../freeRtos/Lib/ramdysk.c ****   
  29:../../freeRtos/Lib/ramdysk.c ****   if ((fd->wpis->rozmiarHi == fd->IndHi) && (fd->wpis->rozmiarLo >= fd->IndLo))
  30:../../freeRtos/Lib/ramdysk.c ****     return 0;
  31:../../freeRtos/Lib/ramdysk.c **** 
  32:../../freeRtos/Lib/ramdysk.c ****   return 1;
  33:../../freeRtos/Lib/ramdysk.c **** }
  34:../../freeRtos/Lib/ramdysk.c **** 
  35:../../freeRtos/Lib/ramdysk.c **** static void uaktualnijRozmiarPliku(struct ramPlikFd *fd)
  36:../../freeRtos/Lib/ramdysk.c **** {
 566               	.LM0:
 567               	.LFBB1:
 568               	/* prologue: function */
 569               	/* frame size = 0 */
 570               	/* stack size = 0 */
 571               	.L__stack_usage = 0
 572 0000 FC01      		movw r30,r24
  37:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->rozmiarHi == fd->IndHi)
 574               	.LM1:
 575 0002 A481      		ldd r26,Z+4
 576 0004 B581      		ldd r27,Z+5
 577 0006 1296      		adiw r26,2
 578 0008 9C91      		ld r25,X
 579 000a 1297      		sbiw r26,2
 580 000c 8381      		ldd r24,Z+3
 581 000e 9817      		cp r25,r24
 582 0010 01F4      		brne .L2
  38:../../freeRtos/Lib/ramdysk.c ****   {
  39:../../freeRtos/Lib/ramdysk.c ****     if (fd->wpis->rozmiarLo < fd->IndLo)
 584               	.LM2:
 585 0012 8281      		ldd r24,Z+2
 586 0014 1196      		adiw r26,1
 587 0016 9C91      		ld r25,X
 588 0018 1197      		sbiw r26,1
 589 001a 9817      		cp r25,r24
 590 001c 00F4      		brsh .L2
  40:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = fd->IndLo;
 592               	.LM3:
 593 001e 1196      		adiw r26,1
 594 0020 8C93      		st X,r24
 595               	.L2:
  41:../../freeRtos/Lib/ramdysk.c ****   }
  42:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->rozmiarHi < fd->IndHi)
 597               	.LM4:
 598 0022 A481      		ldd r26,Z+4
 599 0024 B581      		ldd r27,Z+5
 600 0026 1296      		adiw r26,2
 601 0028 9C91      		ld r25,X
 602 002a 1297      		sbiw r26,2
 603 002c 8381      		ldd r24,Z+3
 604 002e 9817      		cp r25,r24
 605 0030 00F4      		brsh .L1
  43:../../freeRtos/Lib/ramdysk.c ****   {
  44:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = fd->IndLo;    
 607               	.LM5:
 608 0032 8281      		ldd r24,Z+2
 609 0034 1196      		adiw r26,1
 610 0036 8C93      		st X,r24
  45:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarHi = fd->IndHi;    
 612               	.LM6:
 613 0038 A481      		ldd r26,Z+4
 614 003a B581      		ldd r27,Z+5
 615 003c 8381      		ldd r24,Z+3
 616 003e 1296      		adiw r26,2
 617 0040 8C93      		st X,r24
 618 0042 1297      		sbiw r26,2
 619               	.L1:
 620 0044 0895      		ret
 622               	.Lscope1:
 624               		.stabd	78,0,0
 628               	czyscKlaster:
 629               		.stabd	46,0,0
  19:../../freeRtos/Lib/ramdysk.c **** {
 631               	.LM7:
 632               	.LFBB2:
 633               	/* prologue: function */
 634               	/* frame size = 0 */
 635               	/* stack size = 0 */
 636               	.L__stack_usage = 0
  21:../../freeRtos/Lib/ramdysk.c ****   memset (tmpPtr, 0, 256);
 638               	.LM8:
 639 0046 E0E0      		ldi r30,lo8(0)
 640 0048 F82F      		mov r31,r24
 641 004a F058      		subi r31,lo8(-(-128))
 642 004c 80E0      		ldi r24,lo8(256)
 643 004e 91E0      		ldi r25,hi8(256)
 644 0050 DF01      		movw r26,r30
 645 0052 9C01      		movw r18,r24
 646 0054 1D92      		st X+,__zero_reg__
 647 0056 2150      		subi r18,1
 648 0058 3040      		sbci r19,0
 649 005a 01F4      		brne .-8
 650               	/* epilogue start */
  22:../../freeRtos/Lib/ramdysk.c **** }
 652               	.LM9:
 653 005c 0895      		ret
 655               	.Lscope2:
 657               		.stabd	78,0,0
 660               	znajdzWolnyKlaster:
 661               		.stabd	46,0,0
  46:../../freeRtos/Lib/ramdysk.c ****   }
  47:../../freeRtos/Lib/ramdysk.c **** }
  48:../../freeRtos/Lib/ramdysk.c **** 
  49:../../freeRtos/Lib/ramdysk.c **** static uint8_t znajdzWolnyKlaster(void)
  50:../../freeRtos/Lib/ramdysk.c **** {
 663               	.LM10:
 664               	.LFBB3:
 665 005e 1F93      		push r17
 666               	/* prologue: function */
 667               	/* frame size = 0 */
 668               	/* stack size = 1 */
 669               	.L__stack_usage = 1
  51:../../freeRtos/Lib/ramdysk.c ****   uint8_t i;
  52:../../freeRtos/Lib/ramdysk.c ****   for (i=1; i<L_KLASTROW; i++)             //Pomijamy klaster 0, tam jest wpis katalogowy. Jeśli m
 671               	.LM11:
 672 0060 11E0      		ldi r17,lo8(1)
 673               	.L8:
  53:../../freeRtos/Lib/ramdysk.c ****   {                                        //Może być rozszerzony na inne klastry.
  54:../../freeRtos/Lib/ramdysk.c ****     if (klastry[i] == 0)                   //Sprawdzanie, czy klaster jest pusty.
 675               	.LM12:
 676 0062 E12F      		mov r30,r17
 677 0064 F0E0      		ldi r31,lo8(0)
 678 0066 E050      		subi r30,lo8(-(klastry))
 679 0068 F040      		sbci r31,hi8(-(klastry))
 680 006a 8081      		ld r24,Z
 681 006c 8823      		tst r24
 682 006e 01F4      		brne .L6
  55:../../freeRtos/Lib/ramdysk.c ****     {
  56:../../freeRtos/Lib/ramdysk.c ****       klastry[i] = i;                      //Oznaczanie klastra jako ostatniego.
 684               	.LM13:
 685 0070 1083      		st Z,r17
  57:../../freeRtos/Lib/ramdysk.c ****       czyscKlaster(i);                     //Czyszczenie zawartości klastra.
 687               	.LM14:
 688 0072 812F      		mov r24,r17
 689 0074 0E94 0000 		call czyscKlaster
  58:../../freeRtos/Lib/ramdysk.c ****       return i;
 691               	.LM15:
 692 0078 00C0      		rjmp .L7
 693               	.L6:
  52:../../freeRtos/Lib/ramdysk.c ****   for (i=1; i<L_KLASTROW; i++)             //Pomijamy klaster 0, tam jest wpis katalogowy. Jeśli m
 695               	.LM16:
 696 007a 1F5F      		subi r17,lo8(-(1))
 697 007c 1038      		cpi r17,lo8(-128)
 698 007e 01F4      		brne .L8
  59:../../freeRtos/Lib/ramdysk.c ****     }
  60:../../freeRtos/Lib/ramdysk.c ****   }
  61:../../freeRtos/Lib/ramdysk.c ****   return 0;
 700               	.LM17:
 701 0080 10E0      		ldi r17,lo8(0)
 702               	.L7:
  62:../../freeRtos/Lib/ramdysk.c **** }
 704               	.LM18:
 705 0082 812F      		mov r24,r17
 706               	/* epilogue start */
 707 0084 1F91      		pop r17
 708 0086 0895      		ret
 710               	.Lscope3:
 712               		.stabd	78,0,0
 716               	nastepnyKlaster:
 717               		.stabd	46,0,0
  63:../../freeRtos/Lib/ramdysk.c **** 
  64:../../freeRtos/Lib/ramdysk.c **** static uint8_t nastepnyKlaster(uint8_t nrKlastra)
  65:../../freeRtos/Lib/ramdysk.c **** {
 719               	.LM19:
 720               	.LFBB4:
 721 0088 1F93      		push r17
 722               	/* prologue: function */
 723               	/* frame size = 0 */
 724               	/* stack size = 1 */
 725               	.L__stack_usage = 1
  66:../../freeRtos/Lib/ramdysk.c ****   uint8_t temp = klastry[nrKlastra];       //Temp oznacza na następny klaster.
 727               	.LM20:
 728 008a 282F      		mov r18,r24
 729 008c 30E0      		ldi r19,lo8(0)
 730 008e F901      		movw r30,r18
 731 0090 E050      		subi r30,lo8(-(klastry))
 732 0092 F040      		sbci r31,hi8(-(klastry))
 733 0094 1081      		ld r17,Z
  67:../../freeRtos/Lib/ramdysk.c ****   if (temp == nrKlastra)                   //Jeśli klaster wskazuje na samego siebie, co oznacza, 
 735               	.LM21:
 736 0096 1817      		cp r17,r24
 737 0098 01F4      		brne .L11
 738 009a 11E0      		ldi r17,lo8(1)
 739               	.L13:
  68:../../freeRtos/Lib/ramdysk.c ****   {                                        //Należy znaleźć jakiś wolny klaster i go dodać do 
  69:../../freeRtos/Lib/ramdysk.c ****     for (temp=1; temp <128; temp++)        //Przekglądamy wszystkie klastry za wyjątkiem klastra 
  70:../../freeRtos/Lib/ramdysk.c ****     {                                      //Jeśli temp ma wartość 0 to oznacza, że nie ma woln
  71:../../freeRtos/Lib/ramdysk.c ****       if (klastry[temp] == 0)              //Jeśli w tablicy klaster wskazuje na 0, to oznacza, ż
 741               	.LM22:
 742 009c E12F      		mov r30,r17
 743 009e F0E0      		ldi r31,lo8(0)
 744 00a0 E050      		subi r30,lo8(-(klastry))
 745 00a2 F040      		sbci r31,hi8(-(klastry))
 746 00a4 8081      		ld r24,Z
 747 00a6 8823      		tst r24
 748 00a8 01F0      		breq .L12
  69:../../freeRtos/Lib/ramdysk.c ****     for (temp=1; temp <128; temp++)        //Przekglądamy wszystkie klastry za wyjątkiem klastra 
 750               	.LM23:
 751 00aa 1F5F      		subi r17,lo8(-(1))
 752 00ac 1038      		cpi r17,lo8(-128)
 753 00ae 01F4      		brne .L13
 754               	.L12:
  72:../../freeRtos/Lib/ramdysk.c ****         break;                             //Wtedy można przerwać szukanie kolejnych klastrów dl
  73:../../freeRtos/Lib/ramdysk.c ****     }                                      //Taka implementacja z założenia powoduje defragmentac
  74:../../freeRtos/Lib/ramdysk.c ****     
  75:../../freeRtos/Lib/ramdysk.c ****     if (temp != 0)                         //Znaleziono jakiś wolny klaster
  76:../../freeRtos/Lib/ramdysk.c ****     {
  77:../../freeRtos/Lib/ramdysk.c ****       klastry[nrKlastra] = temp;           //Ustawienie łańcucha z klastrami, dodanie do pliku ko
 756               	.LM24:
 757 00b0 2050      		subi r18,lo8(-(klastry))
 758 00b2 3040      		sbci r19,hi8(-(klastry))
 759 00b4 F901      		movw r30,r18
 760 00b6 1083      		st Z,r17
  78:../../freeRtos/Lib/ramdysk.c ****       klastry[temp]=temp;                  //Oznaczenie klastra jako zajętego (ostatniego w danym 
 762               	.LM25:
 763 00b8 E12F      		mov r30,r17
 764 00ba F0E0      		ldi r31,lo8(0)
 765 00bc E050      		subi r30,lo8(-(klastry))
 766 00be F040      		sbci r31,hi8(-(klastry))
 767 00c0 1083      		st Z,r17
  79:../../freeRtos/Lib/ramdysk.c ****       czyscKlaster(temp);                  //Czyszczenie klastra
 769               	.LM26:
 770 00c2 812F      		mov r24,r17
 771 00c4 0E94 0000 		call czyscKlaster
 772               	.L11:
  80:../../freeRtos/Lib/ramdysk.c ****     }
  81:../../freeRtos/Lib/ramdysk.c ****   }
  82:../../freeRtos/Lib/ramdysk.c ****   return temp;
  83:../../freeRtos/Lib/ramdysk.c **** }
 774               	.LM27:
 775 00c8 812F      		mov r24,r17
 776               	/* epilogue start */
 777 00ca 1F91      		pop r17
 778 00cc 0895      		ret
 783               	.Lscope4:
 785               		.stabd	78,0,0
 790               	znajdzKlasterN:
 791               		.stabd	46,0,0
  84:../../freeRtos/Lib/ramdysk.c **** 
  85:../../freeRtos/Lib/ramdysk.c **** static uint8_t znajdzKlasterN(uint8_t nrPierwszegoKlastra, uint8_t lPrzeskokow)
  86:../../freeRtos/Lib/ramdysk.c **** {
 793               	.LM28:
 794               	.LFBB5:
 795 00ce 1F93      		push r17
 796 00d0 DF93      		push r29
 797 00d2 CF93      		push r28
 798 00d4 0F92      		push __tmp_reg__
 799 00d6 CDB7      		in r28,__SP_L__
 800 00d8 DEB7      		in r29,__SP_H__
 801               	/* prologue: function */
 802               	/* frame size = 1 */
 803               	/* stack size = 4 */
 804               	.L__stack_usage = 4
  87:../../freeRtos/Lib/ramdysk.c ****   uint8_t ind;                             //PIerwszy klaster ma indeks 0
  88:../../freeRtos/Lib/ramdysk.c ****   uint8_t wynik = nrPierwszegoKlastra;
  89:../../freeRtos/Lib/ramdysk.c ****   for (ind=0; ind < lPrzeskokow; ind++)    //Należy wykonać klasterN przeskoków na kolejne klast
 806               	.LM29:
 807 00da 10E0      		ldi r17,lo8(0)
 808 00dc 00C0      		rjmp .L16
 809               	.L18:
  90:../../freeRtos/Lib/ramdysk.c ****   {
  91:../../freeRtos/Lib/ramdysk.c ****     wynik = nastepnyKlaster(wynik);        //Jeśli nie ma kolejnego klastra, to zostanie automatyc
 811               	.LM30:
 812 00de 6983      		std Y+1,r22
 813 00e0 0E94 0000 		call nastepnyKlaster
  92:../../freeRtos/Lib/ramdysk.c ****     if (wynik == 0)                        //Sprawdzany, czy znalazł się kolejny klaster
 815               	.LM31:
 816 00e4 6981      		ldd r22,Y+1
 817 00e6 8823      		tst r24
 818 00e8 01F0      		breq .L17
  89:../../freeRtos/Lib/ramdysk.c ****   for (ind=0; ind < lPrzeskokow; ind++)    //Należy wykonać klasterN przeskoków na kolejne klast
 820               	.LM32:
 821 00ea 1F5F      		subi r17,lo8(-(1))
 822               	.L16:
  89:../../freeRtos/Lib/ramdysk.c ****   for (ind=0; ind < lPrzeskokow; ind++)    //Należy wykonać klasterN przeskoków na kolejne klast
 824               	.LM33:
 825 00ec 1617      		cp r17,r22
 826 00ee 00F0      		brlo .L18
 827               	.L17:
 828               	/* epilogue start */
  93:../../freeRtos/Lib/ramdysk.c ****       break;                               //Błąd, zwrócony zostanie klaster 0 - zarezerwowany n
  94:../../freeRtos/Lib/ramdysk.c ****   }
  95:../../freeRtos/Lib/ramdysk.c ****   return wynik;
  96:../../freeRtos/Lib/ramdysk.c **** }
 830               	.LM34:
 831 00f0 0F90      		pop __tmp_reg__
 832 00f2 CF91      		pop r28
 833 00f4 DF91      		pop r29
 834 00f6 1F91      		pop r17
 835 00f8 0895      		ret
 841               	.Lscope5:
 843               		.stabd	78,0,0
 847               	znajdzPlik:
 848               		.stabd	46,0,0
  97:../../freeRtos/Lib/ramdysk.c **** 
  98:../../freeRtos/Lib/ramdysk.c **** #if ( USUNKLASTER == 1)
  99:../../freeRtos/Lib/ramdysk.c **** static uint8_t usunKlaster(uint8_t nrKlastra)
 100:../../freeRtos/Lib/ramdysk.c **** {
 101:../../freeRtos/Lib/ramdysk.c ****   if (klastry[nrKlastra] == 0)
 102:../../freeRtos/Lib/ramdysk.c ****     return 1;                              //Klaster nie był zajęty                     
 103:../../freeRtos/Lib/ramdysk.c ****   uint8_t temp;
 104:../../freeRtos/Lib/ramdysk.c ****   for (temp = 0; temp <128; temp++)
 105:../../freeRtos/Lib/ramdysk.c ****     if (klastry[temp] == nrKlastra)        //Znaleziono klaster, który wskazuje na ten usuwany
 106:../../freeRtos/Lib/ramdysk.c ****     {
 107:../../freeRtos/Lib/ramdysk.c ****       if (klastry[nrKlastra] == nrKlastra) //Sprawdzanie, czy usuwany klaster nie jest ostatni.
 108:../../freeRtos/Lib/ramdysk.c **** 	klastry[temp] = temp;              //Jeśli tak, to klaster poprzedni musi być ustawiony jako kla
 109:../../freeRtos/Lib/ramdysk.c ****       else
 110:../../freeRtos/Lib/ramdysk.c **** 	klastry[temp] = klastry[nrKlastra];//Klaster poprzedni wskazuje na klaster następny za tym usuwan
 111:../../freeRtos/Lib/ramdysk.c ****     }
 112:../../freeRtos/Lib/ramdysk.c ****   klastry[nrKlastra] = 0;                  //Oznaczanie klastra jako pusty
 113:../../freeRtos/Lib/ramdysk.c ****   return 0;
 114:../../freeRtos/Lib/ramdysk.c **** }
 115:../../freeRtos/Lib/ramdysk.c **** #endif
 116:../../freeRtos/Lib/ramdysk.c **** 
 117:../../freeRtos/Lib/ramdysk.c **** static struct ramPlik* znajdzPlik(const char *nazwa)
 118:../../freeRtos/Lib/ramdysk.c **** {
 850               	.LM35:
 851               	.LFBB6:
 852 00fa 8F92      		push r8
 853 00fc 9F92      		push r9
 854 00fe AF92      		push r10
 855 0100 BF92      		push r11
 856 0102 DF92      		push r13
 857 0104 EF92      		push r14
 858 0106 FF92      		push r15
 859 0108 0F93      		push r16
 860 010a 1F93      		push r17
 861 010c DF93      		push r29
 862 010e CF93      		push r28
 863 0110 0F92      		push __tmp_reg__
 864 0112 CDB7      		in r28,__SP_L__
 865 0114 DEB7      		in r29,__SP_H__
 866               	/* prologue: function */
 867               	/* frame size = 1 */
 868               	/* stack size = 12 */
 869               	.L__stack_usage = 12
 870 0116 8C01      		movw r16,r24
 119:../../freeRtos/Lib/ramdysk.c ****   uint8_t dlNazwy = strlen(nazwa);        //Skracanie podanej nazwy do 8 znaków
 872               	.LM36:
 873 0118 DC01      		movw r26,r24
 874 011a 0D90      		ld __tmp_reg__,X+
 875 011c 0020      		tst __tmp_reg__
 876 011e 01F4      		brne .-6
 877 0120 9D01      		movw r18,r26
 878 0122 2150      		subi r18,lo8(-(-1))
 879 0124 3040      		sbci r19,hi8(-(-1))
 880 0126 281B      		sub r18,r24
 881 0128 2930      		cpi r18,lo8(9)
 882 012a 00F0      		brlo .L20
 883 012c 28E0      		ldi r18,lo8(8)
 884               	.L20:
 120:../../freeRtos/Lib/ramdysk.c ****   if (dlNazwy > 8)
 121:../../freeRtos/Lib/ramdysk.c ****     dlNazwy = 8;
 122:../../freeRtos/Lib/ramdysk.c ****   
 123:../../freeRtos/Lib/ramdysk.c ****   
 124:../../freeRtos/Lib/ramdysk.c ****   if (nazwa[dlNazwy-1] == 0)
 886               	.LM37:
 887 012e F801      		movw r30,r16
 888 0130 E20F      		add r30,r18
 889 0132 F11D      		adc r31,__zero_reg__
 890 0134 3197      		sbiw r30,1
 891 0136 8081      		ld r24,Z
 892 0138 8823      		tst r24
 893 013a 01F4      		brne .L21
 125:../../freeRtos/Lib/ramdysk.c ****     dlNazwy--;                            //Nie sprawdzamy czy string kończy się /0
 895               	.LM38:
 896 013c 2150      		subi r18,lo8(-(-1))
 897               	.L21:
 117:../../freeRtos/Lib/ramdysk.c **** static struct ramPlik* znajdzPlik(const char *nazwa)
 899               	.LM39:
 900 013e F801      		movw r30,r16
 901 0140 3196      		adiw r30,1
 126:../../freeRtos/Lib/ramdysk.c ****   struct ramPlik *plik;
 127:../../freeRtos/Lib/ramdysk.c ****   uint8_t temp;
 128:../../freeRtos/Lib/ramdysk.c ****   uint8_t tempKlaster=0;
 129:../../freeRtos/Lib/ramdysk.c ****   uint8_t tempKlaster2;
 130:../../freeRtos/Lib/ramdysk.c **** 
 131:../../freeRtos/Lib/ramdysk.c ****   for (temp=1; temp < dlNazwy; temp ++)
 903               	.LM40:
 904 0142 81E0      		ldi r24,lo8(1)
 905 0144 00C0      		rjmp .L22
 906               	.L24:
 132:../../freeRtos/Lib/ramdysk.c ****   {
 133:../../freeRtos/Lib/ramdysk.c ****     if (nazwa[temp] == ' ')               //Pozbycie sie spacji
 908               	.LM41:
 909 0146 9191      		ld r25,Z+
 910 0148 9032      		cpi r25,lo8(32)
 911 014a 01F0      		breq .L29
 131:../../freeRtos/Lib/ramdysk.c ****   for (temp=1; temp < dlNazwy; temp ++)
 913               	.LM42:
 914 014c 8F5F      		subi r24,lo8(-(1))
 915               	.L22:
 131:../../freeRtos/Lib/ramdysk.c ****   for (temp=1; temp < dlNazwy; temp ++)
 917               	.LM43:
 918 014e 8217      		cp r24,r18
 919 0150 00F0      		brlo .L24
 134:../../freeRtos/Lib/ramdysk.c ****     {
 135:../../freeRtos/Lib/ramdysk.c ****       dlNazwy = temp;
 136:../../freeRtos/Lib/ramdysk.c ****       break; 
 137:../../freeRtos/Lib/ramdysk.c ****     }
 138:../../freeRtos/Lib/ramdysk.c ****   }
 139:../../freeRtos/Lib/ramdysk.c ****   if (dlNazwy == 0)
 921               	.LM44:
 922 0152 2223      		tst r18
 923 0154 01F0      		breq .L30
 924 0156 00C0      		rjmp .L23
 925               	.L29:
 133:../../freeRtos/Lib/ramdysk.c ****     if (nazwa[temp] == ' ')               //Pozbycie sie spacji
 927               	.LM45:
 928 0158 282F      		mov r18,r24
 929               	.L23:
 930 015a DD24      		clr r13
 931 015c 00C0      		rjmp .L28
 932               	.L31:
 140:../../freeRtos/Lib/ramdysk.c ****     return NULL;
 141:../../freeRtos/Lib/ramdysk.c ****   
 142:../../freeRtos/Lib/ramdysk.c ****   do
 143:../../freeRtos/Lib/ramdysk.c ****   {
 144:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik *)(dataPtr(tempKlaster, 0));  //Odczyt pierwszego nagłówka pliku w kla
 145:../../freeRtos/Lib/ramdysk.c ****     for (temp=0; temp <16; temp++)
 146:../../freeRtos/Lib/ramdysk.c ****     {
 147:../../freeRtos/Lib/ramdysk.c ****       if (strncmp(nazwa, plik->nazwa, dlNazwy) == 0)
 148:../../freeRtos/Lib/ramdysk.c **** 	return plik;
 149:../../freeRtos/Lib/ramdysk.c ****       plik++;                                            //Przejście do kolejnego wpisu (w tym sam
 150:../../freeRtos/Lib/ramdysk.c ****     }   
 151:../../freeRtos/Lib/ramdysk.c ****     tempKlaster2 = tempKlaster;
 152:../../freeRtos/Lib/ramdysk.c ****     tempKlaster = klastry[tempKlaster];
 934               	.LM46:
 935 015e D82E      		mov r13,r24
 936               	.L28:
 144:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik *)(dataPtr(tempKlaster, 0));  //Odczyt pierwszego nagłówka pliku w kla
 938               	.LM47:
 939 0160 ED2C      		mov r14,r13
 940 0162 FF24      		clr r15
 941 0164 C701      		movw r24,r14
 942 0166 8058      		subi r24,lo8(-(128))
 943 0168 9F4F      		sbci r25,hi8(-(128))
 944 016a 982E      		mov r9,r24
 945 016c 8824      		clr r8
 117:../../freeRtos/Lib/ramdysk.c **** static struct ramPlik* znajdzPlik(const char *nazwa)
 947               	.LM48:
 948 016e 80EF      		ldi r24,lo8(240)
 949 0170 A82E      		mov r10,r24
 950 0172 B12C      		mov r11,__zero_reg__
 951 0174 A80C      		add r10,r8
 952 0176 B91C      		adc r11,r9
 953               	.L27:
 147:../../freeRtos/Lib/ramdysk.c ****       if (strncmp(nazwa, plik->nazwa, dlNazwy) == 0)
 955               	.LM49:
 956 0178 B401      		movw r22,r8
 957 017a 6C5F      		subi r22,lo8(-(4))
 958 017c 7F4F      		sbci r23,hi8(-(4))
 959 017e C801      		movw r24,r16
 960 0180 422F      		mov r20,r18
 961 0182 50E0      		ldi r21,lo8(0)
 962 0184 2983      		std Y+1,r18
 963 0186 0E94 0000 		call strncmp
 964 018a 2981      		ldd r18,Y+1
 965 018c 0097      		sbiw r24,0
 966 018e 01F0      		breq .L25
 145:../../freeRtos/Lib/ramdysk.c ****     for (temp=0; temp <16; temp++)
 968               	.LM50:
 969 0190 8A14      		cp r8,r10
 970 0192 9B04      		cpc r9,r11
 971 0194 01F0      		breq .L26
 149:../../freeRtos/Lib/ramdysk.c ****       plik++;                                            //Przejście do kolejnego wpisu (w tym sam
 973               	.LM51:
 974 0196 E0E1      		ldi r30,lo8(16)
 975 0198 F0E0      		ldi r31,hi8(16)
 976 019a 8E0E      		add r8,r30
 977 019c 9F1E      		adc r9,r31
 978 019e 00C0      		rjmp .L27
 979               	.L26:
 981               	.LM52:
 982 01a0 F701      		movw r30,r14
 983 01a2 E050      		subi r30,lo8(-(klastry))
 984 01a4 F040      		sbci r31,hi8(-(klastry))
 985 01a6 8081      		ld r24,Z
 153:../../freeRtos/Lib/ramdysk.c ****   }
 154:../../freeRtos/Lib/ramdysk.c ****   while (tempKlaster2 != tempKlaster);
 987               	.LM53:
 988 01a8 D816      		cp r13,r24
 989 01aa 01F4      		brne .L31
 990               	.L30:
 140:../../freeRtos/Lib/ramdysk.c ****     return NULL;
 992               	.LM54:
 993 01ac 8824      		clr r8
 994 01ae 9924      		clr r9
 995               	.L25:
 155:../../freeRtos/Lib/ramdysk.c ****   return NULL;
 156:../../freeRtos/Lib/ramdysk.c **** }
 997               	.LM55:
 998 01b0 C401      		movw r24,r8
 999               	/* epilogue start */
 1000 01b2 0F90      		pop __tmp_reg__
 1001 01b4 CF91      		pop r28
 1002 01b6 DF91      		pop r29
 1003 01b8 1F91      		pop r17
 1004 01ba 0F91      		pop r16
 1005 01bc FF90      		pop r15
 1006 01be EF90      		pop r14
 1007 01c0 DF90      		pop r13
 1008 01c2 BF90      		pop r11
 1009 01c4 AF90      		pop r10
 1010 01c6 9F90      		pop r9
 1011 01c8 8F90      		pop r8
 1012 01ca 0895      		ret
 1018               	.Lscope6:
 1020               		.stabd	78,0,0
 1022               	.global	ramDyskInit
 1024               	ramDyskInit:
 1025               		.stabd	46,0,0
 157:../../freeRtos/Lib/ramdysk.c **** 
 158:../../freeRtos/Lib/ramdysk.c **** static struct ramPlik* znajdzMiejsceNaWpis(void)
 159:../../freeRtos/Lib/ramdysk.c **** {
 160:../../freeRtos/Lib/ramdysk.c ****   struct ramPlik *plik;
 161:../../freeRtos/Lib/ramdysk.c ****   uint8_t temp;
 162:../../freeRtos/Lib/ramdysk.c ****   uint8_t tempKlaster=0;                                 //Przeszukiwanie głównego wpisu katalogo
 163:../../freeRtos/Lib/ramdysk.c ****   uint8_t tempKlaster2;                                  //Przeszukiwanie głównego wpisu katalogo
 164:../../freeRtos/Lib/ramdysk.c ****   do
 165:../../freeRtos/Lib/ramdysk.c ****   {
 166:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik *)(dataPtr(tempKlaster, 0));  //Odczyt pierwszego nagłówka pliku w kla
 167:../../freeRtos/Lib/ramdysk.c ****     for (temp=0; temp <16; temp++)
 168:../../freeRtos/Lib/ramdysk.c ****     {
 169:../../freeRtos/Lib/ramdysk.c ****       if (plik->nazwa[0] == 0)
 170:../../freeRtos/Lib/ramdysk.c **** 	return plik;
 171:../../freeRtos/Lib/ramdysk.c ****       plik++;                                            //Przejście do kolejnego wpisu (w tym sam
 172:../../freeRtos/Lib/ramdysk.c ****     }   
 173:../../freeRtos/Lib/ramdysk.c ****     tempKlaster2 = tempKlaster;
 174:../../freeRtos/Lib/ramdysk.c ****     tempKlaster = klastry[tempKlaster];
 175:../../freeRtos/Lib/ramdysk.c ****   }
 176:../../freeRtos/Lib/ramdysk.c ****   while (tempKlaster2 != tempKlaster);
 177:../../freeRtos/Lib/ramdysk.c ****   
 178:../../freeRtos/Lib/ramdysk.c ****   klastry[tempKlaster] = znajdzWolnyKlaster();
 179:../../freeRtos/Lib/ramdysk.c ****   plik = NULL;
 180:../../freeRtos/Lib/ramdysk.c ****   if (klastry[tempKlaster] != 0)
 181:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik*) (dataPtr(klastry[tempKlaster], 0));
 182:../../freeRtos/Lib/ramdysk.c **** 
 183:../../freeRtos/Lib/ramdysk.c ****   return plik;
 184:../../freeRtos/Lib/ramdysk.c **** }
 185:../../freeRtos/Lib/ramdysk.c **** 
 186:../../freeRtos/Lib/ramdysk.c **** 
 187:../../freeRtos/Lib/ramdysk.c **** void ramDyskInit(void)
 188:../../freeRtos/Lib/ramdysk.c **** {
 1027               	.LM56:
 1028               	.LFBB7:
 1029               	/* prologue: function */
 1030               	/* frame size = 0 */
 1031               	/* stack size = 0 */
 1032               	.L__stack_usage = 0
 189:../../freeRtos/Lib/ramdysk.c ****   memset (klastry, 0, 128);              //Czyszczenie tablicy klastrów (wszystkie są puste)
 1034               	.LM57:
 1035 01cc 80E8      		ldi r24,lo8(-128)
 1036 01ce E0E0      		ldi r30,lo8(klastry)
 1037 01d0 F0E0      		ldi r31,hi8(klastry)
 1038 01d2 DF01      		movw r26,r30
 1039 01d4 1D92      		st X+,__zero_reg__
 1040 01d6 8A95      	        dec r24
 1041 01d8 01F4      		brne .-6
 190:../../freeRtos/Lib/ramdysk.c ****   memset (dataPtr(0,0), 0, 256);         //Czyszczenie zerowego klastra z tablicą plików
 1043               	.LM58:
 1044 01da 80E0      		ldi r24,lo8(256)
 1045 01dc 91E0      		ldi r25,hi8(256)
 1046 01de E0E0      		ldi r30,lo8(-32768)
 1047 01e0 F0E8      		ldi r31,hi8(-32768)
 1048 01e2 DF01      		movw r26,r30
 1049 01e4 9C01      		movw r18,r24
 1050 01e6 1D92      		st X+,__zero_reg__
 1051 01e8 2150      		subi r18,1
 1052 01ea 3040      		sbci r19,0
 1053 01ec 01F4      		brne .-8
 1054               	/* epilogue start */
 191:../../freeRtos/Lib/ramdysk.c **** }
 1056               	.LM59:
 1057 01ee 0895      		ret
 1059               	.Lscope7:
 1061               		.stabd	78,0,0
 1063               	.global	ramDyskUtworzPlik
 1065               	ramDyskUtworzPlik:
 1066               		.stabd	46,0,0
 192:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskUtworzPlik(const char *nazwa)
 193:../../freeRtos/Lib/ramdysk.c **** {                                        //Nowo utworzony plik nie zajmuje żadnego klastra
 1068               	.LM60:
 1069               	.LFBB8:
 1070 01f0 CF92      		push r12
 1071 01f2 DF92      		push r13
 1072 01f4 EF92      		push r14
 1073 01f6 FF92      		push r15
 1074 01f8 0F93      		push r16
 1075 01fa 1F93      		push r17
 1076 01fc CF93      		push r28
 1077 01fe DF93      		push r29
 1078               	/* prologue: function */
 1079               	/* frame size = 0 */
 1080               	/* stack size = 8 */
 1081               	.L__stack_usage = 8
 1082 0200 F82E      		mov r15,r24
 1083 0202 092F      		mov r16,r25
 194:../../freeRtos/Lib/ramdysk.c ****   uint8_t dlNazwy = strlen(nazwa);
 1085               	.LM61:
 1086 0204 E82F      		mov r30,r24
 1087 0206 F92F      		mov r31,r25
 1088 0208 DF01      		movw r26,r30
 1089 020a 0D90      		ld __tmp_reg__,X+
 1090 020c 0020      		tst __tmp_reg__
 1091 020e 01F4      		brne .-6
 1092 0210 1197      		sbiw r26,1
 1093 0212 1A2F      		mov r17,r26
 1094 0214 181B      		sub r17,r24
 1095 0216 1930      		cpi r17,lo8(9)
 1096 0218 00F0      		brlo .L34
 1097 021a 18E0      		ldi r17,lo8(8)
 1098               	.L34:
 1099 021c 2F2D      		mov r18,r15
 1100 021e 302F      		mov r19,r16
 1101 0220 F901      		movw r30,r18
 195:../../freeRtos/Lib/ramdysk.c ****   uint8_t i;
 196:../../freeRtos/Lib/ramdysk.c ****   if (dlNazwy > 8)
 197:../../freeRtos/Lib/ramdysk.c ****     dlNazwy = 8;
 198:../../freeRtos/Lib/ramdysk.c ****   
 199:../../freeRtos/Lib/ramdysk.c ****   for (i=0; i<dlNazwy; i++)
 1103               	.LM62:
 1104 0222 80E0      		ldi r24,lo8(0)
 1105 0224 00C0      		rjmp .L35
 1106               	.L37:
 200:../../freeRtos/Lib/ramdysk.c ****   {  if (nazwa[i] == ' ')
 1108               	.LM63:
 1109 0226 9191      		ld r25,Z+
 1110 0228 9032      		cpi r25,lo8(32)
 1111 022a 01F0      		breq .L43
 199:../../freeRtos/Lib/ramdysk.c ****   for (i=0; i<dlNazwy; i++)
 1113               	.LM64:
 1114 022c 8F5F      		subi r24,lo8(-(1))
 1115               	.L35:
 199:../../freeRtos/Lib/ramdysk.c ****   for (i=0; i<dlNazwy; i++)
 1117               	.LM65:
 1118 022e 8117      		cp r24,r17
 1119 0230 00F0      		brlo .L37
 1120 0232 00C0      		rjmp .L36
 1121               	.L43:
 1123               	.LM66:
 1124 0234 182F      		mov r17,r24
 1125               	.L36:
 201:../../freeRtos/Lib/ramdysk.c ****      {
 202:../../freeRtos/Lib/ramdysk.c ****        dlNazwy = i;
 203:../../freeRtos/Lib/ramdysk.c ****        break;
 204:../../freeRtos/Lib/ramdysk.c ****      }
 205:../../freeRtos/Lib/ramdysk.c ****   }
 206:../../freeRtos/Lib/ramdysk.c ****   if (dlNazwy == 0)
 1127               	.LM67:
 1128 0236 1123      		tst r17
 1129 0238 01F4      		brne .+2
 1130 023a 00C0      		rjmp .L45
 207:../../freeRtos/Lib/ramdysk.c ****     return 0;
 208:../../freeRtos/Lib/ramdysk.c ****   
 209:../../freeRtos/Lib/ramdysk.c ****   struct ramPlik *plik;
 210:../../freeRtos/Lib/ramdysk.c ****   if ((plik = znajdzPlik(nazwa)) != NULL)
 1132               	.LM68:
 1133 023c 8F2D      		mov r24,r15
 1134 023e 902F      		mov r25,r16
 1135 0240 0E94 0000 		call znajdzPlik
 1136 0244 0097      		sbiw r24,0
 1137 0246 01F0      		breq .+2
 1138 0248 00C0      		rjmp .L45
 1139 024a EE24      		clr r14
 1140 024c 00C0      		rjmp .L42
 1141               	.L46:
 1142               	.LBB9:
 1143               	.LBB10:
 174:../../freeRtos/Lib/ramdysk.c ****     tempKlaster = klastry[tempKlaster];
 1145               	.LM69:
 1146 024e E82E      		mov r14,r24
 1147               	.L42:
 166:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik *)(dataPtr(tempKlaster, 0));  //Odczyt pierwszego nagłówka pliku w kla
 1149               	.LM70:
 1150 0250 8E2D      		mov r24,r14
 1151 0252 90E0      		ldi r25,lo8(0)
 1152 0254 EC01      		movw r28,r24
 1153 0256 C058      		subi r28,lo8(-(128))
 1154 0258 DF4F      		sbci r29,hi8(-(128))
 1155 025a DC2F      		mov r29,r28
 1156 025c CC27      		clr r28
 192:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskUtworzPlik(const char *nazwa)
 1158               	.LM71:
 1159 025e 9E01      		movw r18,r28
 1160 0260 2051      		subi r18,lo8(-(240))
 1161 0262 3F4F      		sbci r19,hi8(-(240))
 1162               	.L41:
 169:../../freeRtos/Lib/ramdysk.c ****       if (plik->nazwa[0] == 0)
 1164               	.LM72:
 1165 0264 4C81      		ldd r20,Y+4
 1166 0266 4423      		tst r20
 1167 0268 01F0      		breq .L39
 167:../../freeRtos/Lib/ramdysk.c ****     for (temp=0; temp <16; temp++)
 1169               	.LM73:
 1170 026a C217      		cp r28,r18
 1171 026c D307      		cpc r29,r19
 1172 026e 01F0      		breq .L40
 171:../../freeRtos/Lib/ramdysk.c ****       plik++;                                            //Przejście do kolejnego wpisu (w tym sam
 1174               	.LM74:
 1175 0270 6096      		adiw r28,16
 1176 0272 00C0      		rjmp .L41
 1177               	.L40:
 174:../../freeRtos/Lib/ramdysk.c ****     tempKlaster = klastry[tempKlaster];
 1179               	.LM75:
 1180 0274 8050      		subi r24,lo8(-(klastry))
 1181 0276 9040      		sbci r25,hi8(-(klastry))
 1182 0278 DC01      		movw r26,r24
 1183 027a 8C91      		ld r24,X
 176:../../freeRtos/Lib/ramdysk.c ****   while (tempKlaster2 != tempKlaster);
 1185               	.LM76:
 1186 027c E816      		cp r14,r24
 1187 027e 01F4      		brne .L46
 178:../../freeRtos/Lib/ramdysk.c ****   klastry[tempKlaster] = znajdzWolnyKlaster();
 1189               	.LM77:
 1190 0280 0E94 0000 		call znajdzWolnyKlaster
 1191 0284 EE2D      		mov r30,r14
 1192 0286 F0E0      		ldi r31,lo8(0)
 1193 0288 E050      		subi r30,lo8(-(klastry))
 1194 028a F040      		sbci r31,hi8(-(klastry))
 1195 028c 8083      		st Z,r24
 180:../../freeRtos/Lib/ramdysk.c ****   if (klastry[tempKlaster] != 0)
 1197               	.LM78:
 1198 028e 8823      		tst r24
 1199 0290 01F0      		breq .L48
 181:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik*) (dataPtr(klastry[tempKlaster], 0));
 1201               	.LM79:
 1202 0292 C82F      		mov r28,r24
 1203 0294 D0E0      		ldi r29,lo8(0)
 1204 0296 C058      		subi r28,lo8(-(128))
 1205 0298 DF4F      		sbci r29,hi8(-(128))
 1206 029a DC2F      		mov r29,r28
 1207 029c CC27      		clr r28
 1208               	.L39:
 1209               	.LBE10:
 1210               	.LBE9:
 211:../../freeRtos/Lib/ramdysk.c ****   {
 212:../../freeRtos/Lib/ramdysk.c ****     return 0;
 213:../../freeRtos/Lib/ramdysk.c ****   }
 214:../../freeRtos/Lib/ramdysk.c ****   
 215:../../freeRtos/Lib/ramdysk.c ****   if ((plik = znajdzMiejsceNaWpis()) != NULL) //Szukanie pustego wpisu (nagłówka) po skasowanym p
 1212               	.LM80:
 1213 029e 2097      		sbiw r28,0
 1214 02a0 01F0      		breq .L48
 216:../../freeRtos/Lib/ramdysk.c ****   {
 217:../../freeRtos/Lib/ramdysk.c ****     memset(plik, 0, 12);                      //Czyszczenie wpisu (pola: pierwszyKlaster, rozmiarLo
 1216               	.LM81:
 1217 02a2 6E01      		movw r12,r28
 1218 02a4 EC2F      		mov r30,r28
 1219 02a6 FD2D      		mov r31,r13
 1220 02a8 8CE0      		ldi r24,lo8(12)
 1221 02aa DF01      		movw r26,r30
 1222 02ac 1D92      		st X+,__zero_reg__
 1223 02ae 8A95      	        dec r24
 1224 02b0 01F4      		brne .-6
 218:../../freeRtos/Lib/ramdysk.c ****     strncpy(plik->nazwa, nazwa, dlNazwy);     //Ustawianie odpowiedniej nazwy pliku
 1226               	.LM82:
 1227 02b2 CE01      		movw r24,r28
 1228 02b4 0496      		adiw r24,4
 1229 02b6 6F2D      		mov r22,r15
 1230 02b8 702F      		mov r23,r16
 1231 02ba 412F      		mov r20,r17
 1232 02bc 50E0      		ldi r21,lo8(0)
 1233 02be 0E94 0000 		call strncpy
 219:../../freeRtos/Lib/ramdysk.c ****     plik -> dataMod = systemTime();           //Ustawianie czasu modyfikacji
 1235               	.LM83:
 1236 02c2 1C86      		std Y+12,__zero_reg__
 1237 02c4 1D86      		std Y+13,__zero_reg__
 1238 02c6 1E86      		std Y+14,__zero_reg__
 1239 02c8 1F86      		std Y+15,__zero_reg__
 1240               	.L45:
 212:../../freeRtos/Lib/ramdysk.c ****     return 0;
 1242               	.LM84:
 1243 02ca 80E0      		ldi r24,lo8(0)
 1244 02cc 00C0      		rjmp .L38
 1245               	.L48:
 220:../../freeRtos/Lib/ramdysk.c ****     return 0;                            
 221:../../freeRtos/Lib/ramdysk.c ****   }
 222:../../freeRtos/Lib/ramdysk.c ****   return 1;
 1247               	.LM85:
 1248 02ce 81E0      		ldi r24,lo8(1)
 1249               	.L38:
 1250               	/* epilogue start */
 223:../../freeRtos/Lib/ramdysk.c **** }
 1252               	.LM86:
 1253 02d0 DF91      		pop r29
 1254 02d2 CF91      		pop r28
 1255 02d4 1F91      		pop r17
 1256 02d6 0F91      		pop r16
 1257 02d8 FF90      		pop r15
 1258 02da EF90      		pop r14
 1259 02dc DF90      		pop r13
 1260 02de CF90      		pop r12
 1261 02e0 0895      		ret
 1266               	.Lscope8:
 1268               		.stabd	78,0,0
 1272               	.global	ramDyskOtworzPlik
 1274               	ramDyskOtworzPlik:
 1275               		.stabd	46,0,0
 224:../../freeRtos/Lib/ramdysk.c **** 
 225:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskOtworzPlik(const char *nazwa, struct ramPlikFd *fd)
 226:../../freeRtos/Lib/ramdysk.c **** {
 1277               	.LM87:
 1278               	.LFBB9:
 1279 02e2 EF92      		push r14
 1280 02e4 FF92      		push r15
 1281 02e6 CF93      		push r28
 1282 02e8 DF93      		push r29
 1283               	/* prologue: function */
 1284               	/* frame size = 0 */
 1285               	/* stack size = 4 */
 1286               	.L__stack_usage = 4
 1287 02ea EB01      		movw r28,r22
 227:../../freeRtos/Lib/ramdysk.c ****   uint8_t wynik = 1;
 228:../../freeRtos/Lib/ramdysk.c ****   struct ramPlik *plik;
 229:../../freeRtos/Lib/ramdysk.c ****   if ((plik = znajdzPlik(nazwa)) != NULL)
 1289               	.LM88:
 1290 02ec 0E94 0000 		call znajdzPlik
 1291 02f0 FC01      		movw r30,r24
 1292 02f2 0097      		sbiw r24,0
 1293 02f4 01F0      		breq .L51
 230:../../freeRtos/Lib/ramdysk.c ****   {
 231:../../freeRtos/Lib/ramdysk.c ****     memset(fd, 0, 3);                                      //Zerowanie struktury deskryptora pliku
 1295               	.LM89:
 1296 02f6 7E01      		movw r14,r28
 1297 02f8 2C2F      		mov r18,r28
 1298 02fa 3F2D      		mov r19,r15
 1299 02fc 83E0      		ldi r24,lo8(3)
 1300 02fe D901      		movw r26,r18
 1301 0300 1D92      		st X+,__zero_reg__
 1302 0302 8A95      	        dec r24
 1303 0304 01F4      		brne .-6
 232:../../freeRtos/Lib/ramdysk.c ****     fd->wpis = plik;                                       //Ustawianie w deskryptorze wskaźnika n
 1305               	.LM90:
 1306 0306 EC83      		std Y+4,r30
 1307 0308 FD83      		std Y+5,r31
 233:../../freeRtos/Lib/ramdysk.c ****     plik->lAktOtw++;                                       //Uaktualnienie licznika otwarć plików
 1309               	.LM91:
 1310 030a 8381      		ldd r24,Z+3
 1311 030c 8F5F      		subi r24,lo8(-(1))
 1312 030e 8383      		std Z+3,r24
 234:../../freeRtos/Lib/ramdysk.c ****     wynik = 0;
 1314               	.LM92:
 1315 0310 80E0      		ldi r24,lo8(0)
 1316 0312 00C0      		rjmp .L50
 1317               	.L51:
 227:../../freeRtos/Lib/ramdysk.c ****   uint8_t wynik = 1;
 1319               	.LM93:
 1320 0314 81E0      		ldi r24,lo8(1)
 1321               	.L50:
 1322               	/* epilogue start */
 235:../../freeRtos/Lib/ramdysk.c ****   }
 236:../../freeRtos/Lib/ramdysk.c ****   return wynik;
 237:../../freeRtos/Lib/ramdysk.c **** }
 1324               	.LM94:
 1325 0316 DF91      		pop r29
 1326 0318 CF91      		pop r28
 1327 031a FF90      		pop r15
 1328 031c EF90      		pop r14
 1329 031e 0895      		ret
 1335               	.Lscope9:
 1337               		.stabd	78,0,0
 1340               	.global	ramDyskUsunPlik
 1342               	ramDyskUsunPlik:
 1343               		.stabd	46,0,0
 238:../../freeRtos/Lib/ramdysk.c **** 
 239:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskUsunPlik(const char *nazwa)
 240:../../freeRtos/Lib/ramdysk.c **** {
 1345               	.LM95:
 1346               	.LFBB10:
 1347               	/* prologue: function */
 1348               	/* frame size = 0 */
 1349               	/* stack size = 0 */
 1350               	.L__stack_usage = 0
 241:../../freeRtos/Lib/ramdysk.c ****   struct ramPlik *plik;
 242:../../freeRtos/Lib/ramdysk.c ****   if ((plik = znajdzPlik(nazwa)) == NULL)
 1352               	.LM96:
 1353 0320 0E94 0000 		call znajdzPlik
 1354 0324 FC01      		movw r30,r24
 1355 0326 0097      		sbiw r24,0
 1356 0328 01F0      		breq .L58
 243:../../freeRtos/Lib/ramdysk.c ****     return 1;                                              //Nie znaleziono pliku
 244:../../freeRtos/Lib/ramdysk.c ****   if (plik->lAktOtw != 0)
 1358               	.LM97:
 1359 032a 8381      		ldd r24,Z+3
 1360 032c 8823      		tst r24
 1361 032e 01F0      		breq .L60
 1362 0330 00C0      		rjmp .L61
 1363               	.L57:
 245:../../freeRtos/Lib/ramdysk.c ****     return 2;                                              //Plik jest otwarty
 246:../../freeRtos/Lib/ramdysk.c ****   
 247:../../freeRtos/Lib/ramdysk.c ****   uint8_t usuwanyKlaster;
 248:../../freeRtos/Lib/ramdysk.c ****   while(plik->pierwszyKlaster != 0)                        //Już na samym początku może się oka
 249:../../freeRtos/Lib/ramdysk.c ****   {
 250:../../freeRtos/Lib/ramdysk.c ****     usuwanyKlaster = plik->pierwszyKlaster;
 251:../../freeRtos/Lib/ramdysk.c ****     if (klastry[usuwanyKlaster] == usuwanyKlaster)         //Sprawdzanie, czy nie usuwamy ostatnieg
 1365               	.LM98:
 1366 0332 822F      		mov r24,r18
 1367 0334 90E0      		ldi r25,lo8(0)
 1368 0336 DC01      		movw r26,r24
 1369 0338 A050      		subi r26,lo8(-(klastry))
 1370 033a B040      		sbci r27,hi8(-(klastry))
 1371 033c 3C91      		ld r19,X
 1372 033e 3217      		cp r19,r18
 1373 0340 01F4      		brne .L55
 252:../../freeRtos/Lib/ramdysk.c ****       plik->pierwszyKlaster = 0;                           //Ok można już zakończyć usuwanie pl
 1375               	.LM99:
 1376 0342 1082      		st Z,__zero_reg__
 1377 0344 00C0      		rjmp .L56
 1378               	.L55:
 253:../../freeRtos/Lib/ramdysk.c ****     else
 254:../../freeRtos/Lib/ramdysk.c ****       plik->pierwszyKlaster = klastry[usuwanyKlaster];     //Przejście do następnego klastra
 1380               	.LM100:
 1381 0346 3083      		st Z,r19
 1382               	.L56:
 255:../../freeRtos/Lib/ramdysk.c ****     klastry[usuwanyKlaster] = 0;                           //Usunięcie klastra
 1384               	.LM101:
 1385 0348 8050      		subi r24,lo8(-(klastry))
 1386 034a 9040      		sbci r25,hi8(-(klastry))
 1387 034c DC01      		movw r26,r24
 1388 034e 1C92      		st X,__zero_reg__
 1389               	.L60:
 248:../../freeRtos/Lib/ramdysk.c ****   while(plik->pierwszyKlaster != 0)                        //Już na samym początku może się oka
 1391               	.LM102:
 1392 0350 2081      		ld r18,Z
 1393 0352 2223      		tst r18
 1394 0354 01F4      		brne .L57
 256:../../freeRtos/Lib/ramdysk.c ****   }
 257:../../freeRtos/Lib/ramdysk.c ****   
 258:../../freeRtos/Lib/ramdysk.c ****   memset (plik, 0, 16);                                    //Wpis katalogowy zostaje. Jest pusty. I
 1396               	.LM103:
 1397 0356 80E1      		ldi r24,lo8(16)
 1398 0358 1192      		st Z+,__zero_reg__
 1399 035a 8A95      	        dec r24
 1400 035c 01F4      		brne .-6
 259:../../freeRtos/Lib/ramdysk.c **** //relokacjaTablicyWpisow()
 260:../../freeRtos/Lib/ramdysk.c ****   return 0;
 1402               	.LM104:
 1403 035e 80E0      		ldi r24,lo8(0)
 1404 0360 0895      		ret
 1405               	.L58:
 243:../../freeRtos/Lib/ramdysk.c ****     return 1;                                              //Nie znaleziono pliku
 1407               	.LM105:
 1408 0362 81E0      		ldi r24,lo8(1)
 1409 0364 0895      		ret
 1410               	.L61:
 245:../../freeRtos/Lib/ramdysk.c ****     return 2;                                              //Plik jest otwarty
 1412               	.LM106:
 1413 0366 82E0      		ldi r24,lo8(2)
 261:../../freeRtos/Lib/ramdysk.c **** }
 1415               	.LM107:
 1416 0368 0895      		ret
 1421               	.Lscope10:
 1423               		.stabd	78,0,0
 1426               	.global	ramDyskZamknijPlik
 1428               	ramDyskZamknijPlik:
 1429               		.stabd	46,0,0
 262:../../freeRtos/Lib/ramdysk.c **** 
 263:../../freeRtos/Lib/ramdysk.c **** void ramDyskZamknijPlik(struct ramPlikFd *fd)
 264:../../freeRtos/Lib/ramdysk.c **** {
 1431               	.LM108:
 1432               	.LFBB11:
 1433               	/* prologue: function */
 1434               	/* frame size = 0 */
 1435               	/* stack size = 0 */
 1436               	.L__stack_usage = 0
 265:../../freeRtos/Lib/ramdysk.c ****   if (fd -> wpis -> lAktOtw > 0)                           //Sprawdzanie, czy licznik otwarć jest 
 1438               	.LM109:
 1439 036a DC01      		movw r26,r24
 1440 036c 1496      		adiw r26,4
 1441 036e ED91      		ld r30,X+
 1442 0370 FC91      		ld r31,X
 1443 0372 1597      		sbiw r26,4+1
 1444 0374 2381      		ldd r18,Z+3
 1445 0376 2223      		tst r18
 1446 0378 01F0      		breq .L62
 266:../../freeRtos/Lib/ramdysk.c ****   {
 267:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->lAktOtw--;                                   //Zmniejszanie licznika otwarć pliku
 1448               	.LM110:
 1449 037a 2150      		subi r18,lo8(-(-1))
 1450 037c 2383      		std Z+3,r18
 268:../../freeRtos/Lib/ramdysk.c ****     memset(fd, 0, sizeof(struct ramPlikFd));               //CZyszczenie struktury deskryptora plik
 1452               	.LM111:
 1453 037e 86E0      		ldi r24,lo8(6)
 1454 0380 1D92      		st X+,__zero_reg__
 1455 0382 8A95      	        dec r24
 1456 0384 01F4      		brne .-6
 1457               	.L62:
 1458 0386 0895      		ret
 1460               	.Lscope11:
 1462               		.stabd	78,0,0
 1465               	.global	ramDyskCzyscPlik
 1467               	ramDyskCzyscPlik:
 1468               		.stabd	46,0,0
 269:../../freeRtos/Lib/ramdysk.c ****   }
 270:../../freeRtos/Lib/ramdysk.c **** }
 271:../../freeRtos/Lib/ramdysk.c **** 
 272:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskCzyscPlik(struct ramPlikFd *fd)
 273:../../freeRtos/Lib/ramdysk.c **** {
 1470               	.LM112:
 1471               	.LFBB12:
 1472 0388 CF93      		push r28
 1473 038a DF93      		push r29
 1474               	/* prologue: function */
 1475               	/* frame size = 0 */
 1476               	/* stack size = 2 */
 1477               	.L__stack_usage = 2
 1478 038c FC01      		movw r30,r24
 274:../../freeRtos/Lib/ramdysk.c ****   uint8_t usuwanyKlaster;
 275:../../freeRtos/Lib/ramdysk.c ****   while(fd->wpis->pierwszyKlaster != 0)                        //Już na samym początku może się
 1480               	.LM113:
 1481 038e 00C0      		rjmp .L65
 1482               	.L68:
 276:../../freeRtos/Lib/ramdysk.c ****   {
 277:../../freeRtos/Lib/ramdysk.c ****     usuwanyKlaster = fd->wpis->pierwszyKlaster;
 278:../../freeRtos/Lib/ramdysk.c ****     if (klastry[usuwanyKlaster] == usuwanyKlaster)             //Sprawdzanie, czy nie usuwamy ostat
 1484               	.LM114:
 1485 0390 822F      		mov r24,r18
 1486 0392 90E0      		ldi r25,lo8(0)
 1487 0394 EC01      		movw r28,r24
 1488 0396 C050      		subi r28,lo8(-(klastry))
 1489 0398 D040      		sbci r29,hi8(-(klastry))
 1490 039a 3881      		ld r19,Y
 1491 039c 3217      		cp r19,r18
 1492 039e 01F4      		brne .L66
 279:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->pierwszyKlaster = 0;                           //Ok można już zakończyć usuwani
 1494               	.LM115:
 1495 03a0 1C92      		st X,__zero_reg__
 1496 03a2 00C0      		rjmp .L67
 1497               	.L66:
 280:../../freeRtos/Lib/ramdysk.c ****     else
 281:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->pierwszyKlaster = klastry[usuwanyKlaster];     //Przejście do następnego klastra
 1499               	.LM116:
 1500 03a4 3C93      		st X,r19
 1501               	.L67:
 282:../../freeRtos/Lib/ramdysk.c ****     klastry[usuwanyKlaster] = 0;                               //Usunięcie klastra
 1503               	.LM117:
 1504 03a6 8050      		subi r24,lo8(-(klastry))
 1505 03a8 9040      		sbci r25,hi8(-(klastry))
 1506 03aa DC01      		movw r26,r24
 1507 03ac 1C92      		st X,__zero_reg__
 1508               	.L65:
 275:../../freeRtos/Lib/ramdysk.c ****   while(fd->wpis->pierwszyKlaster != 0)                        //Już na samym początku może się
 1510               	.LM118:
 1511 03ae A481      		ldd r26,Z+4
 1512 03b0 B581      		ldd r27,Z+5
 1513 03b2 2C91      		ld r18,X
 1514 03b4 2223      		tst r18
 1515 03b6 01F4      		brne .L68
 283:../../freeRtos/Lib/ramdysk.c ****   }
 284:../../freeRtos/Lib/ramdysk.c ****   fd->wpis->rozmiarLo       = 0;
 1517               	.LM119:
 1518 03b8 1196      		adiw r26,1
 1519 03ba 1C92      		st X,__zero_reg__
 285:../../freeRtos/Lib/ramdysk.c ****   fd->wpis->rozmiarHi       = 0;
 1521               	.LM120:
 1522 03bc A481      		ldd r26,Z+4
 1523 03be B581      		ldd r27,Z+5
 1524 03c0 1296      		adiw r26,2
 1525 03c2 1C92      		st X,__zero_reg__
 286:../../freeRtos/Lib/ramdysk.c ****   fd->wpis->dataMod         = systemTime();
 1527               	.LM121:
 1528 03c4 A481      		ldd r26,Z+4
 1529 03c6 B581      		ldd r27,Z+5
 1530 03c8 1C96      		adiw r26,12
 1531 03ca 1D92      		st X+,__zero_reg__
 1532 03cc 1D92      		st X+,__zero_reg__
 1533 03ce 1D92      		st X+,__zero_reg__
 1534 03d0 1C92      		st X,__zero_reg__
 1535 03d2 1F97      		sbiw r26,12+3
 287:../../freeRtos/Lib/ramdysk.c ****   memset (fd, 0, 4);
 1537               	.LM122:
 1538 03d4 1082      		st Z,__zero_reg__
 1539 03d6 1182      		std Z+1,__zero_reg__
 1540 03d8 1282      		std Z+2,__zero_reg__
 1541 03da 1382      		std Z+3,__zero_reg__
 288:../../freeRtos/Lib/ramdysk.c ****   return 0;
 289:../../freeRtos/Lib/ramdysk.c **** }
 1543               	.LM123:
 1544 03dc 80E0      		ldi r24,lo8(0)
 1545               	/* epilogue start */
 1546 03de DF91      		pop r29
 1547 03e0 CF91      		pop r28
 1548 03e2 0895      		ret
 1550               	.Lscope12:
 1552               		.stabd	78,0,0
 1556               	.global	ramDyskZapiszBajtDoPliku
 1558               	ramDyskZapiszBajtDoPliku:
 1559               		.stabd	46,0,0
 290:../../freeRtos/Lib/ramdysk.c **** 
 291:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskZapiszBajtDoPliku(struct ramPlikFd *fd, uint8_t znak)
 292:../../freeRtos/Lib/ramdysk.c **** {
 1561               	.LM124:
 1562               	.LFBB13:
 1563 03e4 1F93      		push r17
 1564 03e6 CF93      		push r28
 1565 03e8 DF93      		push r29
 1566               	/* prologue: function */
 1567               	/* frame size = 0 */
 1568               	/* stack size = 3 */
 1569               	.L__stack_usage = 3
 1570 03ea EC01      		movw r28,r24
 1571 03ec 162F      		mov r17,r22
 293:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster;
 294:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 1573               	.LM125:
 1574 03ee EC81      		ldd r30,Y+4
 1575 03f0 FD81      		ldd r31,Y+5
 1576 03f2 8081      		ld r24,Z
 1577 03f4 8823      		tst r24
 1578 03f6 01F4      		brne .L70
 295:../../freeRtos/Lib/ramdysk.c ****   {
 296:../../freeRtos/Lib/ramdysk.c ****     if ((tmpKlaster = znajdzWolnyKlaster()) == 0)
 1580               	.LM126:
 1581 03f8 0E94 0000 		call znajdzWolnyKlaster
 1582 03fc 8823      		tst r24
 1583 03fe 01F0      		breq .L75
 297:../../freeRtos/Lib/ramdysk.c ****       return 1;                                         //Nie można było przydzielić pierwszego 
 298:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->pierwszyKlaster = tmpKlaster;
 1585               	.LM127:
 1586 0400 EC81      		ldd r30,Y+4
 1587 0402 FD81      		ldd r31,Y+5
 1588 0404 8083      		st Z,r24
 1589               	.L70:
 299:../../freeRtos/Lib/ramdysk.c ****   }
 300:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)
 1591               	.LM128:
 1592 0406 8A81      		ldd r24,Y+2
 1593 0408 8823      		tst r24
 1594 040a 01F4      		brne .L72
 301:../../freeRtos/Lib/ramdysk.c ****   {
 302:../../freeRtos/Lib/ramdysk.c ****     tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->IndHi); //Wyszukanie lub dodanie nas
 1596               	.LM129:
 1597 040c EC81      		ldd r30,Y+4
 1598 040e FD81      		ldd r31,Y+5
 1599 0410 8081      		ld r24,Z
 1600 0412 6B81      		ldd r22,Y+3
 1601 0414 0E94 0000 		call znajdzKlasterN
 303:../../freeRtos/Lib/ramdysk.c ****     if (tmpKlaster == 0)
 1603               	.LM130:
 1604 0418 8823      		tst r24
 1605 041a 01F0      		breq .L76
 304:../../freeRtos/Lib/ramdysk.c ****     {
 305:../../freeRtos/Lib/ramdysk.c ****       return 2;                                       //Nie można było przydzielić kolejnego kla
 306:../../freeRtos/Lib/ramdysk.c ****     }
 307:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk = dataPtr(tmpKlaster, 0);                 //Ustawianie wskaźnika na początek nowego k
 1607               	.LM131:
 1608 041c 90E0      		ldi r25,lo8(0)
 1609 041e 8058      		subi r24,lo8(-(128))
 1610 0420 9F4F      		sbci r25,hi8(-(128))
 1611 0422 1882      		st Y,__zero_reg__
 1612 0424 8983      		std Y+1,r24
 1613               	.L72:
 308:../../freeRtos/Lib/ramdysk.c ****   }
 309:../../freeRtos/Lib/ramdysk.c ****   
 310:../../freeRtos/Lib/ramdysk.c ****   *(fd->Wsk) = znak;                                  //Zapis bajtu do pliku
 1615               	.LM132:
 1616 0426 E881      		ld r30,Y
 1617 0428 F981      		ldd r31,Y+1
 1618 042a 1083      		st Z,r17
 311:../../freeRtos/Lib/ramdysk.c **** 
 312:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo++;                                        //Zwiększanie indeksu odczytu/zapisu
 1620               	.LM133:
 1621 042c 8A81      		ldd r24,Y+2
 1622 042e 8F5F      		subi r24,lo8(-(1))
 1623 0430 8A83      		std Y+2,r24
 313:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)                                 //Jeśli ma on wartość 0, to oznacza to, ż
 1625               	.LM134:
 1626 0432 8823      		tst r24
 1627 0434 01F4      		brne .L73
 314:../../freeRtos/Lib/ramdysk.c ****     fd->IndHi++;                                      //Należy zwiększyć bardziej znaczący bajt
 1629               	.LM135:
 1630 0436 8B81      		ldd r24,Y+3
 1631 0438 8F5F      		subi r24,lo8(-(1))
 1632 043a 8B83      		std Y+3,r24
 1633 043c 00C0      		rjmp .L74
 1634               	.L73:
 315:../../freeRtos/Lib/ramdysk.c ****   else                                                //Wziąż działamy na tym samym klastrze.
 316:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk++;                                        //Można uaktualnić wskaźnik
 1636               	.LM136:
 1637 043e 8881      		ld r24,Y
 1638 0440 9981      		ldd r25,Y+1
 1639 0442 0196      		adiw r24,1
 1640 0444 8883      		st Y,r24
 1641 0446 9983      		std Y+1,r25
 1642               	.L74:
 317:../../freeRtos/Lib/ramdysk.c ****     
 318:../../freeRtos/Lib/ramdysk.c ****   uaktualnijRozmiarPliku(fd);                         //Uaktualnianie rozmiaru
 1644               	.LM137:
 1645 0448 CE01      		movw r24,r28
 1646 044a 0E94 0000 		call uaktualnijRozmiarPliku
 319:../../freeRtos/Lib/ramdysk.c ****   return 0;
 1648               	.LM138:
 1649 044e 80E0      		ldi r24,lo8(0)
 1650 0450 00C0      		rjmp .L71
 1651               	.L75:
 297:../../freeRtos/Lib/ramdysk.c ****       return 1;                                         //Nie można było przydzielić pierwszego 
 1653               	.LM139:
 1654 0452 81E0      		ldi r24,lo8(1)
 1655 0454 00C0      		rjmp .L71
 1656               	.L76:
 305:../../freeRtos/Lib/ramdysk.c ****       return 2;                                       //Nie można było przydzielić kolejnego kla
 1658               	.LM140:
 1659 0456 82E0      		ldi r24,lo8(2)
 1660               	.L71:
 1661               	/* epilogue start */
 320:../../freeRtos/Lib/ramdysk.c **** }
 1663               	.LM141:
 1664 0458 DF91      		pop r29
 1665 045a CF91      		pop r28
 1666 045c 1F91      		pop r17
 1667 045e 0895      		ret
 1669               	.Lscope13:
 1671               		.stabd	78,0,0
 1676               	putSTD:
 1677               		.stabd	46,0,0
 321:../../freeRtos/Lib/ramdysk.c **** 
 322:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskCzytajBajtZPliku(struct ramPlikFd *fd, uint8_t *bajt)
 323:../../freeRtos/Lib/ramdysk.c **** {
 324:../../freeRtos/Lib/ramdysk.c ****   if (wObrebiePliku(fd) != 0)                         //Sprawdzanie, czy jesteśmy w obrębie pliku
 325:../../freeRtos/Lib/ramdysk.c ****     return 1;                                         //1 - eof
 326:../../freeRtos/Lib/ramdysk.c **** 
 327:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)                                 //Sprawdzanie, czy działamy na początku now
 328:../../freeRtos/Lib/ramdysk.c ****   {
 329:../../freeRtos/Lib/ramdysk.c ****     uint8_t nrKlastra = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->IndHi);
 330:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk = dataPtr(nrKlastra, 0);                  //Ustawianie wskaźnika na początek nowego k
 331:../../freeRtos/Lib/ramdysk.c ****   }
 332:../../freeRtos/Lib/ramdysk.c ****   
 333:../../freeRtos/Lib/ramdysk.c ****   *bajt = *(fd->Wsk);                                 //Odczyt z pliku
 334:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo++;                                        //Zwiększenie indeksu o 1
 335:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)                                 //Sprawdzamy, czy przeszliśmy do nowego klas
 336:../../freeRtos/Lib/ramdysk.c ****     fd->IndHi++;                                      //Tak: uaktualniamy liczbę przeskokół wzgl
 337:../../freeRtos/Lib/ramdysk.c ****   else                                                //Działamy na tym samym klastrze
 338:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk++;                                        //Uaktualniamy wskaźnik do tego klastra
 339:../../freeRtos/Lib/ramdysk.c ****   return 0;
 340:../../freeRtos/Lib/ramdysk.c **** }
 341:../../freeRtos/Lib/ramdysk.c **** 
 342:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskZapiszBlokDoPliku(struct ramPlikFd *fd, uint8_t *znaki, uint16_t *dlugosc)
 343:../../freeRtos/Lib/ramdysk.c **** {
 344:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 345:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->pierwszyKlaster = znajdzWolnyKlaster();
 346:../../freeRtos/Lib/ramdysk.c ****   
 347:../../freeRtos/Lib/ramdysk.c ****   uint16_t dlBloku = 256 - fd->IndLo;             //Obliczanie liczby bajtów, jaką da się zapisa
 348:../../freeRtos/Lib/ramdysk.c ****   uint16_t doZapisu = *dlugosc;
 349:../../freeRtos/Lib/ramdysk.c ****   *dlugosc = 0;                                   //Jak do tąd jeszcze nic nie zapisano
 350:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = 0;
 351:../../freeRtos/Lib/ramdysk.c ****   while (doZapisu > 0)
 352:../../freeRtos/Lib/ramdysk.c ****   {
 353:../../freeRtos/Lib/ramdysk.c ****     if (fd->IndLo == 0)                           //Jeśli indeks pokazuje na początek klastra, to
 354:../../freeRtos/Lib/ramdysk.c ****     {
 355:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster == 0)                        //Pierwsza operacja zapisu, nie odczytano jeszcze
 356:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->IndHi); //Odczyt numeru klastra 
 357:../../freeRtos/Lib/ramdysk.c ****       else                                        //Znamy poprzedni klaster
 358:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = nastepnyKlaster(tmpKlaster); //Wystarczy przejść do następnego
 359:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster == 0)                        //Sprawdzanie, czy udało się znaleźć klaster
 360:../../freeRtos/Lib/ramdysk.c ****         return 1;                                 //1 - Brak wolnego klastra
 361:../../freeRtos/Lib/ramdysk.c **** 
 362:../../freeRtos/Lib/ramdysk.c ****       fd->Wsk = dataPtr(tmpKlaster, 0);           //Ustawianie wskaźnika na początek klastra. Ter
 363:../../freeRtos/Lib/ramdysk.c ****     }
 364:../../freeRtos/Lib/ramdysk.c ****     if (doZapisu > dlBloku)                       //Sprawdzanie, czy wszystko uda się zapisać w b
 365:../../freeRtos/Lib/ramdysk.c ****     {                                             //Nie uda się, teraz zapiszemy cały klastr do k
 366:../../freeRtos/Lib/ramdysk.c ****       memcpy(fd->Wsk, znaki, dlBloku);            //Zapis do końca aktualnego klastra
 367:../../freeRtos/Lib/ramdysk.c ****       znaki +=dlBloku;                      
 368:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo = 0;                              //Mniej znaczący bajt odczytu wskazuje na począ
 369:../../freeRtos/Lib/ramdysk.c ****       doZapisu -= dlBloku;                        //Uaktualnianie informacji o liczbie bajtów jaka
 370:../../freeRtos/Lib/ramdysk.c ****       *dlugosc += dlBloku;                        //Uaktualnianie informacji o liczbie zapisanych d
 371:../../freeRtos/Lib/ramdysk.c ****       fd->IndHi++;                                //Ustawienie bardziej znaczącego bajtu indeksu. 
 372:../../freeRtos/Lib/ramdysk.c ****       dlBloku = 256;                              //Do następnego klastra możemy zapisać do 256 
 373:../../freeRtos/Lib/ramdysk.c ****     }
 374:../../freeRtos/Lib/ramdysk.c ****     else                                          //Jest to ostatni zapis. Całe dane zostaną skop
 375:../../freeRtos/Lib/ramdysk.c ****     {
 376:../../freeRtos/Lib/ramdysk.c ****       memcpy(fd->Wsk, znaki, doZapisu);           //Ostatnia operacja zapisu do klasrta.
 377:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo += doZapisu;                      //Uaktualnianie indeksu (wystarczy uaktualnić mn
 378:../../freeRtos/Lib/ramdysk.c ****       *dlugosc  += doZapisu;                      //Uaktualnianie informacji o liczbie zapisanych d
 379:../../freeRtos/Lib/ramdysk.c ****       doZapisu  =  0;                             //Równie dobrze można tutaj wstawić break;
 380:../../freeRtos/Lib/ramdysk.c ****       fd->Wsk = dataPtr(tmpKlaster, fd->IndLo);   //Ustawianie wskaźnika w odpowiednie miejsce kla
 381:../../freeRtos/Lib/ramdysk.c ****     }
 382:../../freeRtos/Lib/ramdysk.c ****   }
 383:../../freeRtos/Lib/ramdysk.c ****   uaktualnijRozmiarPliku(fd);                     //Uaktualnianie rozmiaru pliku
 384:../../freeRtos/Lib/ramdysk.c ****   return 0;
 385:../../freeRtos/Lib/ramdysk.c **** }
 386:../../freeRtos/Lib/ramdysk.c **** 
 387:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskCzytajBlokZPliku(struct ramPlikFd *fd, uint8_t *znaki, uint16_t *dlugosc)
 388:../../freeRtos/Lib/ramdysk.c **** {
 389:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 390:../../freeRtos/Lib/ramdysk.c ****   {
 391:../../freeRtos/Lib/ramdysk.c ****     *dlugosc = 0;
 392:../../freeRtos/Lib/ramdysk.c ****     return 1;                         //1 - Plik jest pusty
 393:../../freeRtos/Lib/ramdysk.c ****   }
 394:../../freeRtos/Lib/ramdysk.c ****   if (wObrebiePliku(fd) != 0)
 395:../../freeRtos/Lib/ramdysk.c ****   {
 396:../../freeRtos/Lib/ramdysk.c ****     *dlugosc = 0;
 397:../../freeRtos/Lib/ramdysk.c ****     return 2;                         //2 - Źle ustawiony indeks odczytu/zapisu (poza obszarem pli
 398:../../freeRtos/Lib/ramdysk.c ****   }
 399:../../freeRtos/Lib/ramdysk.c ****   
 400:../../freeRtos/Lib/ramdysk.c ****   uint16_t lDanych = (fd->wpis->rozmiarHi - fd->IndHi);
 401:../../freeRtos/Lib/ramdysk.c ****   lDanych +=fd->wpis->rozmiarLo;      //Obliczanie liczby bajtów jaka zostałą zapisana jeszcze z
 402:../../freeRtos/Lib/ramdysk.c ****   lDanych -=fd->IndLo;                //Na podstawie wcześniej sprawdzonych warunków jest to zaws
 403:../../freeRtos/Lib/ramdysk.c ****   
 404:../../freeRtos/Lib/ramdysk.c ****   uint16_t doOdczytania = (lDanych < *dlugosc)?  //Sprawdzenie liczby zapisanych bajtół w pliku i
 405:../../freeRtos/Lib/ramdysk.c ****     lDanych :                          //W pliku jest mniej bajtów do odczytu niż chcemy odczyta
 406:../../freeRtos/Lib/ramdysk.c ****     *dlugosc;                          //W pliku jest więcej bajtów niż chcemy odczytać
 407:../../freeRtos/Lib/ramdysk.c ****   *dlugosc = 0;                        //Jak do tąd odczytano 0 bajtów
 408:../../freeRtos/Lib/ramdysk.c ****   uint16_t dlBloku = 256 - fd->IndLo;  //Określanie liczby bajtół jaka zostałą do końca aktua
 409:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = 0;
 410:../../freeRtos/Lib/ramdysk.c ****   while (doOdczytania > 0)
 411:../../freeRtos/Lib/ramdysk.c ****   {
 412:../../freeRtos/Lib/ramdysk.c ****     if (fd->IndLo == 0)                //Indeks odczytu wskazuje na początek klastra. Oznacza to, 
 413:../../freeRtos/Lib/ramdysk.c ****     {                                  //Bardziej znaczący bajt indeksu określa o ile klastrów (
 414:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster == 0)
 415:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->IndHi); 
 416:../../freeRtos/Lib/ramdysk.c ****       else
 417:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = nastepnyKlaster(tmpKlaster);
 418:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster != 0)             //Jeśli znaleziono odpowiedni klaster, to
 419:../../freeRtos/Lib/ramdysk.c ****         fd->Wsk = dataPtr(tmpKlaster, 0); //przestaw wskaźnik na początek tego klastra
 420:../../freeRtos/Lib/ramdysk.c ****       else
 421:../../freeRtos/Lib/ramdysk.c ****         return 3;                      //3 - Nie udało się znaleźć odpowiedniego klastra
 422:../../freeRtos/Lib/ramdysk.c ****     }
 423:../../freeRtos/Lib/ramdysk.c ****     
 424:../../freeRtos/Lib/ramdysk.c ****     if (doOdczytania > dlBloku)        //Odczyt do końca zawartości klastra
 425:../../freeRtos/Lib/ramdysk.c ****     {                                  //dlBloku określa ile zostało jeszcze bajtów do końca kl
 426:../../freeRtos/Lib/ramdysk.c ****       memcpy(znaki, fd->Wsk, dlBloku); //Odczyt zawartości Klastra
 427:../../freeRtos/Lib/ramdysk.c ****       znaki +=dlBloku;                 //Przestawienie wskaźnika do tablicy, w której zapisujemy 
 428:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo = 0;                   //Indeks wskazuje na początek nowego klastra
 429:../../freeRtos/Lib/ramdysk.c ****       fd->IndHi++;                     //Bardziej znaczący bajt określa zmianę klastra. Teraz ni
 430:../../freeRtos/Lib/ramdysk.c ****       doOdczytania -= dlBloku;         //Uaktualnienie liczby bajtół jaką należy odczytać
 431:../../freeRtos/Lib/ramdysk.c ****       *dlugosc += dlBloku;             //Uaktualnienie 
 432:../../freeRtos/Lib/ramdysk.c ****       dlBloku = 256;                   //Kolejny dostępny blok do odczytania, to długość całeg
 433:../../freeRtos/Lib/ramdysk.c ****     }
 434:../../freeRtos/Lib/ramdysk.c ****     else                               //Ostatnia operacja odczytu
 435:../../freeRtos/Lib/ramdysk.c ****     {
 436:../../freeRtos/Lib/ramdysk.c ****       memcpy(znaki, fd->Wsk, doOdczytania);
 437:../../freeRtos/Lib/ramdysk.c ****       fd->Wsk   += doOdczytania;       //Po zakończeniu operacji odczytu nadal działamy w tym sam
 438:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo += doOdczytania;       //Uaktualnianie indeksu. Jesteśmy w tym samym klastrze, zat
 439:../../freeRtos/Lib/ramdysk.c ****       *dlugosc  += doOdczytania;       //Uaktualnianie liczby odczytanych bajtów                  
 440:../../freeRtos/Lib/ramdysk.c ****       doOdczytania = 0;                //Tutaj równie dobrze może być brake
 441:../../freeRtos/Lib/ramdysk.c ****     }
 442:../../freeRtos/Lib/ramdysk.c ****   }
 443:../../freeRtos/Lib/ramdysk.c ****   return 0;
 444:../../freeRtos/Lib/ramdysk.c **** }
 445:../../freeRtos/Lib/ramdysk.c **** 
 446:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskUstawWskaznik(struct ramPlikFd *fd, uint16_t indeks)
 447:../../freeRtos/Lib/ramdysk.c **** {
 448:../../freeRtos/Lib/ramdysk.c ****   if (indeks == 0)                                        //Sprawdzanie, czy wskaźnik nie pokazuje
 449:../../freeRtos/Lib/ramdysk.c ****   {                                                       //Jeśli tak, to nie ma potzeby tworzenia
 450:../../freeRtos/Lib/ramdysk.c ****     fd->IndLo = 0;                                        //Ustawianie na 0 indeksów (mniej i bard
 451:../../freeRtos/Lib/ramdysk.c ****     fd->IndHi = 0;
 452:../../freeRtos/Lib/ramdysk.c ****     return 0;
 453:../../freeRtos/Lib/ramdysk.c ****   }
 454:../../freeRtos/Lib/ramdysk.c ****   indeks--;                                               //Zmniejszamy indeks o 1, by odpowiednio 
 455:../../freeRtos/Lib/ramdysk.c ****                                                           //Jeśli indeks jest większy niż rozmia
 456:../../freeRtos/Lib/ramdysk.c ****   
 457:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)                     //Sprawdzanie, czy plik ma już przydziel
 458:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->pierwszyKlaster = znajdzWolnyKlaster();     //Przydzielanie pierwszego klastra dla pl
 459:../../freeRtos/Lib/ramdysk.c **** 
 460:../../freeRtos/Lib/ramdysk.c ****   uint8_t klasterN = indeks >> 8;                         //Obliczanie liczby klastrów, jaką nale
 461:../../freeRtos/Lib/ramdysk.c **** 
 462:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo = indeks & 0xFF;                              //Obliczanie na podstawie wartości 16 mn
 463:../../freeRtos/Lib/ramdysk.c ****   fd->IndHi = klasterN;                                   //oraz bardziej znaczącego bajtu indeksu
 464:../../freeRtos/Lib/ramdysk.c ****   
 465:../../freeRtos/Lib/ramdysk.c ****   uint8_t nrKlastra = znajdzKlasterN(fd->wpis->pierwszyKlaster, klasterN);
 466:../../freeRtos/Lib/ramdysk.c ****   if (nrKlastra == 0)
 467:../../freeRtos/Lib/ramdysk.c ****     return 1;                                             //Brak klastrów
 468:../../freeRtos/Lib/ramdysk.c **** 
 469:../../freeRtos/Lib/ramdysk.c ****   uaktualnijRozmiarPliku(fd);                             //Uaktualnianie rozmiaru pliku
 470:../../freeRtos/Lib/ramdysk.c **** 
 471:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo++;                                            //Powrót do zadanej wartości indeksu
 472:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)                                     //Jeśli jesteśmy na początku klastra, 
 473:../../freeRtos/Lib/ramdysk.c ****     fd->IndHi++;                                          //Uaktualniamy tylko bardziej znaczący b
 474:../../freeRtos/Lib/ramdysk.c ****   else                                                    //Jesteśmy w obszarze utworzonego klastr
 475:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk=dataPtr(nrKlastra, fd->IndLo);                //ustawić wskaźnik na odpowiednie miejs
 476:../../freeRtos/Lib/ramdysk.c **** 
 477:../../freeRtos/Lib/ramdysk.c ****   return 0; 
 478:../../freeRtos/Lib/ramdysk.c **** }
 479:../../freeRtos/Lib/ramdysk.c **** 
 480:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskUstawWskaznikNaKoniec(struct ramPlikFd *fd)
 481:../../freeRtos/Lib/ramdysk.c **** {
 482:../../freeRtos/Lib/ramdysk.c ****   if (fd == NULL)
 483:../../freeRtos/Lib/ramdysk.c ****     return 1;
 484:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo = fd->wpis->rozmiarLo;
 485:../../freeRtos/Lib/ramdysk.c ****   fd->IndHi = fd->wpis->rozmiarHi;
 486:../../freeRtos/Lib/ramdysk.c **** //  fd->IndLo++;
 487:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = 0;
 488:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo != 0)
 489:../../freeRtos/Lib/ramdysk.c ****   {
 490:../../freeRtos/Lib/ramdysk.c ****     tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->wpis->rozmiarHi);
 491:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk=dataPtr(tmpKlaster, fd->IndLo);
 492:../../freeRtos/Lib/ramdysk.c ****   }  
 493:../../freeRtos/Lib/ramdysk.c ****   return 0;
 494:../../freeRtos/Lib/ramdysk.c **** }
 495:../../freeRtos/Lib/ramdysk.c **** 
 496:../../freeRtos/Lib/ramdysk.c **** uint8_t* ramDyskDodajBlokXmodem(struct ramPlikFd *fd, uint16_t nrBloku)
 497:../../freeRtos/Lib/ramdysk.c **** {
 498:../../freeRtos/Lib/ramdysk.c ****   if (nrBloku == 0)
 499:../../freeRtos/Lib/ramdysk.c ****     return NULL;
 500:../../freeRtos/Lib/ramdysk.c ****   nrBloku --;
 501:../../freeRtos/Lib/ramdysk.c ****   
 502:../../freeRtos/Lib/ramdysk.c ****   uint8_t indHi = (uint8_t)(nrBloku / 2);
 503:../../freeRtos/Lib/ramdysk.c ****   uint8_t indLo = 0;
 504:../../freeRtos/Lib/ramdysk.c ****   uint8_t *wynik;
 505:../../freeRtos/Lib/ramdysk.c ****   
 506:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 507:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->pierwszyKlaster = znajdzWolnyKlaster();
 508:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 509:../../freeRtos/Lib/ramdysk.c ****     return NULL;
 510:../../freeRtos/Lib/ramdysk.c ****   
 511:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster , indHi);
 512:../../freeRtos/Lib/ramdysk.c ****   if (tmpKlaster == 0)
 513:../../freeRtos/Lib/ramdysk.c ****     return NULL;
 514:../../freeRtos/Lib/ramdysk.c ****   if ((nrBloku & 0x0001) == 0x0001)           // Druga część klastra
 515:../../freeRtos/Lib/ramdysk.c ****   {
 516:../../freeRtos/Lib/ramdysk.c ****     indLo = 128;
 517:../../freeRtos/Lib/ramdysk.c ****     if (fd->wpis->rozmiarHi <= indHi)
 518:../../freeRtos/Lib/ramdysk.c ****     {
 519:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarHi = indHi+1;
 520:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = 0;
 521:../../freeRtos/Lib/ramdysk.c ****     }
 522:../../freeRtos/Lib/ramdysk.c ****     wynik=dataPtr(tmpKlaster, 128);
 523:../../freeRtos/Lib/ramdysk.c ****   }
 524:../../freeRtos/Lib/ramdysk.c ****   else
 525:../../freeRtos/Lib/ramdysk.c ****   {
 526:../../freeRtos/Lib/ramdysk.c ****     if (fd->wpis->rozmiarHi < indHi)
 527:../../freeRtos/Lib/ramdysk.c ****     {
 528:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarHi = indHi;
 529:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = 128;
 530:../../freeRtos/Lib/ramdysk.c ****     }
 531:../../freeRtos/Lib/ramdysk.c ****     else if ((fd->wpis->rozmiarHi == indHi) && (fd->wpis->rozmiarLo < 128))
 532:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = 128;
 533:../../freeRtos/Lib/ramdysk.c ****     
 534:../../freeRtos/Lib/ramdysk.c ****     wynik=dataPtr(tmpKlaster, 0);
 535:../../freeRtos/Lib/ramdysk.c ****   }
 536:../../freeRtos/Lib/ramdysk.c ****   return wynik;
 537:../../freeRtos/Lib/ramdysk.c **** }
 538:../../freeRtos/Lib/ramdysk.c **** 
 539:../../freeRtos/Lib/ramdysk.c **** void ramDyskDir(FILE *ostream)
 540:../../freeRtos/Lib/ramdysk.c **** {
 541:../../freeRtos/Lib/ramdysk.c ****   fprintf(ostream, "nazwa\t\trozmiar\totwarty\r\n");
 542:../../freeRtos/Lib/ramdysk.c ****   struct ramPlik *plik;
 543:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = 0;
 544:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster2;
 545:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmp, tmp2, tmp3;
 546:../../freeRtos/Lib/ramdysk.c ****   do 
 547:../../freeRtos/Lib/ramdysk.c ****   {
 548:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik *)(dataPtr(tmpKlaster, 0));
 549:../../freeRtos/Lib/ramdysk.c ****     for (tmp=0; tmp<16; tmp++)
 550:../../freeRtos/Lib/ramdysk.c ****     {
 551:../../freeRtos/Lib/ramdysk.c ****       tmp3=plik->nazwa[0];
 552:../../freeRtos/Lib/ramdysk.c ****       if (tmp3 == 0)
 553:../../freeRtos/Lib/ramdysk.c ****         break;                                            //Ten wpis jest pusty.
 554:../../freeRtos/Lib/ramdysk.c ****       fputc(tmp3         , ostream);
 555:../../freeRtos/Lib/ramdysk.c ****       for (tmp2=1; tmp2<8; tmp2++)
 556:../../freeRtos/Lib/ramdysk.c ****       {
 557:../../freeRtos/Lib/ramdysk.c ****         if (tmp3 != 0)
 558:../../freeRtos/Lib/ramdysk.c ****           tmp3=plik->nazwa[tmp2];
 559:../../freeRtos/Lib/ramdysk.c **** 
 560:../../freeRtos/Lib/ramdysk.c ****         if (tmp3 != 0)
 561:../../freeRtos/Lib/ramdysk.c ****           fputc(tmp3     , ostream);
 562:../../freeRtos/Lib/ramdysk.c ****         else
 563:../../freeRtos/Lib/ramdysk.c ****           fputc(' '      , ostream);
 564:../../freeRtos/Lib/ramdysk.c ****       }
 565:../../freeRtos/Lib/ramdysk.c ****       fprintf(ostream, "\t%d\t%d\r\n", 256*plik->rozmiarHi+plik->rozmiarLo,  plik->lAktOtw);
 566:../../freeRtos/Lib/ramdysk.c ****       plik++;
 567:../../freeRtos/Lib/ramdysk.c ****     }
 568:../../freeRtos/Lib/ramdysk.c ****     tmpKlaster2 = tmpKlaster;
 569:../../freeRtos/Lib/ramdysk.c ****     tmpKlaster = klastry[tmpKlaster];
 570:../../freeRtos/Lib/ramdysk.c ****   }
 571:../../freeRtos/Lib/ramdysk.c ****   while (tmpKlaster != tmpKlaster2);
 572:../../freeRtos/Lib/ramdysk.c **** }
 573:../../freeRtos/Lib/ramdysk.c **** 
 574:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskLiczbaWolnychKlastrow(void)
 575:../../freeRtos/Lib/ramdysk.c **** {
 576:../../freeRtos/Lib/ramdysk.c ****   uint8_t wynik=0;
 577:../../freeRtos/Lib/ramdysk.c ****   uint8_t temp;
 578:../../freeRtos/Lib/ramdysk.c ****   for (temp = L_KLASTROW-1; temp > 0; temp--)
 579:../../freeRtos/Lib/ramdysk.c ****     if (klastry[temp] == 0)
 580:../../freeRtos/Lib/ramdysk.c ****       wynik++;
 581:../../freeRtos/Lib/ramdysk.c ****   return wynik;
 582:../../freeRtos/Lib/ramdysk.c **** }
 583:../../freeRtos/Lib/ramdysk.c **** 
 584:../../freeRtos/Lib/ramdysk.c **** 
 585:../../freeRtos/Lib/ramdysk.c **** static int getSTD(FILE *stream)
 586:../../freeRtos/Lib/ramdysk.c **** {
 587:../../freeRtos/Lib/ramdysk.c ****   uint8_t wynik;
 588:../../freeRtos/Lib/ramdysk.c ****   struct ramPlikFd *fd = (struct ramPlikFd *)(fdev_get_udata(stream));
 589:../../freeRtos/Lib/ramdysk.c ****   
 590:../../freeRtos/Lib/ramdysk.c ****   if (ramDyskCzytajBajtZPliku(fd, &wynik) == 0)
 591:../../freeRtos/Lib/ramdysk.c ****     return wynik;
 592:../../freeRtos/Lib/ramdysk.c ****   return EOF;
 593:../../freeRtos/Lib/ramdysk.c **** }
 594:../../freeRtos/Lib/ramdysk.c **** 
 595:../../freeRtos/Lib/ramdysk.c **** static int putSTD(char c, FILE *stream)
 596:../../freeRtos/Lib/ramdysk.c **** {
 1679               	.LM142:
 1680               	.LFBB14:
 1681               	/* prologue: function */
 1682               	/* frame size = 0 */
 1683               	/* stack size = 0 */
 1684               	.L__stack_usage = 0
 1685 0460 282F      		mov r18,r24
 1686 0462 FB01      		movw r30,r22
 597:../../freeRtos/Lib/ramdysk.c ****   struct ramPlikFd *fd = (struct ramPlikFd *)(fdev_get_udata(stream));
 598:../../freeRtos/Lib/ramdysk.c ****   return ramDyskZapiszBajtDoPliku(fd, c);  
 1688               	.LM143:
 1689 0464 8485      		ldd r24,Z+12
 1690 0466 9585      		ldd r25,Z+13
 1691 0468 622F      		mov r22,r18
 1692 046a 0E94 0000 		call ramDyskZapiszBajtDoPliku
 599:../../freeRtos/Lib/ramdysk.c **** }
 1694               	.LM144:
 1695 046e 90E0      		ldi r25,lo8(0)
 1696               	/* epilogue start */
 1697 0470 0895      		ret
 1699               	.Lscope14:
 1701               		.stabd	78,0,0
 1705               	.global	ramDyskCzytajBajtZPliku
 1707               	ramDyskCzytajBajtZPliku:
 1708               		.stabd	46,0,0
 323:../../freeRtos/Lib/ramdysk.c **** {
 1710               	.LM145:
 1711               	.LFBB15:
 1712 0472 0F93      		push r16
 1713 0474 1F93      		push r17
 1714 0476 CF93      		push r28
 1715 0478 DF93      		push r29
 1716               	/* prologue: function */
 1717               	/* frame size = 0 */
 1718               	/* stack size = 4 */
 1719               	.L__stack_usage = 4
 1720 047a EC01      		movw r28,r24
 1721 047c 8B01      		movw r16,r22
 1722               	.LBB11:
 1723               	.LBB12:
  26:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->rozmiarHi > fd->IndHi)
 1725               	.LM146:
 1726 047e EC81      		ldd r30,Y+4
 1727 0480 FD81      		ldd r31,Y+5
 1728 0482 8281      		ldd r24,Z+2
 1729 0484 6B81      		ldd r22,Y+3
 1730 0486 6817      		cp r22,r24
 1731 0488 00F0      		brlo .L79
  29:../../freeRtos/Lib/ramdysk.c ****   if ((fd->wpis->rozmiarHi == fd->IndHi) && (fd->wpis->rozmiarLo >= fd->IndLo))
 1733               	.LM147:
 1734 048a 8617      		cp r24,r22
 1735 048c 01F4      		brne .L84
 1736 048e 9181      		ldd r25,Z+1
 1737 0490 8A81      		ldd r24,Y+2
 1738 0492 9817      		cp r25,r24
 1739 0494 00F0      		brlo .L84
 1740               	.L79:
 1741               	.LBE12:
 1742               	.LBE11:
 327:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)                                 //Sprawdzanie, czy działamy na początku now
 1744               	.LM148:
 1745 0496 8A81      		ldd r24,Y+2
 1746 0498 8823      		tst r24
 1747 049a 01F4      		brne .L81
 1748               	.LBB14:
 329:../../freeRtos/Lib/ramdysk.c ****     uint8_t nrKlastra = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->IndHi);
 1750               	.LM149:
 1751 049c 8081      		ld r24,Z
 1752 049e 0E94 0000 		call znajdzKlasterN
 330:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk = dataPtr(nrKlastra, 0);                  //Ustawianie wskaźnika na początek nowego k
 1754               	.LM150:
 1755 04a2 90E0      		ldi r25,lo8(0)
 1756 04a4 8058      		subi r24,lo8(-(128))
 1757 04a6 9F4F      		sbci r25,hi8(-(128))
 1758 04a8 1882      		st Y,__zero_reg__
 1759 04aa 8983      		std Y+1,r24
 1760               	.L81:
 1761               	.LBE14:
 333:../../freeRtos/Lib/ramdysk.c ****   *bajt = *(fd->Wsk);                                 //Odczyt z pliku
 1763               	.LM151:
 1764 04ac E881      		ld r30,Y
 1765 04ae F981      		ldd r31,Y+1
 1766 04b0 8081      		ld r24,Z
 1767 04b2 F801      		movw r30,r16
 1768 04b4 8083      		st Z,r24
 334:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo++;                                        //Zwiększenie indeksu o 1
 1770               	.LM152:
 1771 04b6 8A81      		ldd r24,Y+2
 1772 04b8 8F5F      		subi r24,lo8(-(1))
 1773 04ba 8A83      		std Y+2,r24
 335:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)                                 //Sprawdzamy, czy przeszliśmy do nowego klas
 1775               	.LM153:
 1776 04bc 8823      		tst r24
 1777 04be 01F4      		brne .L82
 336:../../freeRtos/Lib/ramdysk.c ****     fd->IndHi++;                                      //Tak: uaktualniamy liczbę przeskokół wzgl
 1779               	.LM154:
 1780 04c0 8B81      		ldd r24,Y+3
 1781 04c2 8F5F      		subi r24,lo8(-(1))
 1782 04c4 8B83      		std Y+3,r24
 1783 04c6 00C0      		rjmp .L85
 1784               	.L82:
 338:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk++;                                        //Uaktualniamy wskaźnik do tego klastra
 1786               	.LM155:
 1787 04c8 8881      		ld r24,Y
 1788 04ca 9981      		ldd r25,Y+1
 1789 04cc 0196      		adiw r24,1
 1790 04ce 8883      		st Y,r24
 1791 04d0 9983      		std Y+1,r25
 1792               	.L85:
 339:../../freeRtos/Lib/ramdysk.c ****   return 0;
 1794               	.LM156:
 1795 04d2 80E0      		ldi r24,lo8(0)
 1796 04d4 00C0      		rjmp .L80
 1797               	.L84:
 1798               	.LBB15:
 1799               	.LBB13:
 325:../../freeRtos/Lib/ramdysk.c ****     return 1;                                         //1 - eof
 1801               	.LM157:
 1802 04d6 81E0      		ldi r24,lo8(1)
 1803               	.L80:
 1804               	/* epilogue start */
 1805               	.LBE13:
 1806               	.LBE15:
 340:../../freeRtos/Lib/ramdysk.c **** }
 1808               	.LM158:
 1809 04d8 DF91      		pop r29
 1810 04da CF91      		pop r28
 1811 04dc 1F91      		pop r17
 1812 04de 0F91      		pop r16
 1813 04e0 0895      		ret
 1815               	.Lscope15:
 1817               		.stabd	78,0,0
 1821               	getSTD:
 1822               		.stabd	46,0,0
 586:../../freeRtos/Lib/ramdysk.c **** {
 1824               	.LM159:
 1825               	.LFBB16:
 1826 04e2 DF93      		push r29
 1827 04e4 CF93      		push r28
 1828 04e6 0F92      		push __tmp_reg__
 1829 04e8 CDB7      		in r28,__SP_L__
 1830 04ea DEB7      		in r29,__SP_H__
 1831               	/* prologue: function */
 1832               	/* frame size = 1 */
 1833               	/* stack size = 3 */
 1834               	.L__stack_usage = 3
 590:../../freeRtos/Lib/ramdysk.c ****   if (ramDyskCzytajBajtZPliku(fd, &wynik) == 0)
 1836               	.LM160:
 1837 04ec FC01      		movw r30,r24
 1838 04ee 8485      		ldd r24,Z+12
 1839 04f0 9585      		ldd r25,Z+13
 1840 04f2 BE01      		movw r22,r28
 1841 04f4 6F5F      		subi r22,lo8(-(1))
 1842 04f6 7F4F      		sbci r23,hi8(-(1))
 1843 04f8 0E94 0000 		call ramDyskCzytajBajtZPliku
 1844 04fc 8823      		tst r24
 1845 04fe 01F4      		brne .L88
 591:../../freeRtos/Lib/ramdysk.c ****     return wynik;
 1847               	.LM161:
 1848 0500 2981      		ldd r18,Y+1
 1849 0502 30E0      		ldi r19,lo8(0)
 1850 0504 00C0      		rjmp .L87
 1851               	.L88:
 592:../../freeRtos/Lib/ramdysk.c ****   return EOF;
 1853               	.LM162:
 1854 0506 2FEF      		ldi r18,lo8(-1)
 1855 0508 3FEF      		ldi r19,hi8(-1)
 1856               	.L87:
 593:../../freeRtos/Lib/ramdysk.c **** }
 1858               	.LM163:
 1859 050a C901      		movw r24,r18
 1860               	/* epilogue start */
 1861 050c 0F90      		pop __tmp_reg__
 1862 050e CF91      		pop r28
 1863 0510 DF91      		pop r29
 1864 0512 0895      		ret
 1869               	.Lscope16:
 1871               		.stabd	78,0,0
 1876               	.global	ramDyskZapiszBlokDoPliku
 1878               	ramDyskZapiszBlokDoPliku:
 1879               		.stabd	46,0,0
 343:../../freeRtos/Lib/ramdysk.c **** {
 1881               	.LM164:
 1882               	.LFBB17:
 1883 0514 8F92      		push r8
 1884 0516 9F92      		push r9
 1885 0518 AF92      		push r10
 1886 051a BF92      		push r11
 1887 051c DF92      		push r13
 1888 051e EF92      		push r14
 1889 0520 FF92      		push r15
 1890 0522 0F93      		push r16
 1891 0524 1F93      		push r17
 1892 0526 CF93      		push r28
 1893 0528 DF93      		push r29
 1894               	/* prologue: function */
 1895               	/* frame size = 0 */
 1896               	/* stack size = 11 */
 1897               	.L__stack_usage = 11
 1898 052a EC01      		movw r28,r24
 1899 052c 4B01      		movw r8,r22
 1900 052e 5A01      		movw r10,r20
 344:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 1902               	.LM165:
 1903 0530 0C81      		ldd r16,Y+4
 1904 0532 1D81      		ldd r17,Y+5
 1905 0534 F801      		movw r30,r16
 1906 0536 8081      		ld r24,Z
 1907 0538 8823      		tst r24
 1908 053a 01F4      		brne .L90
 345:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->pierwszyKlaster = znajdzWolnyKlaster();
 1910               	.LM166:
 1911 053c 0E94 0000 		call znajdzWolnyKlaster
 1912 0540 F801      		movw r30,r16
 1913 0542 8083      		st Z,r24
 1914               	.L90:
 347:../../freeRtos/Lib/ramdysk.c ****   uint16_t dlBloku = 256 - fd->IndLo;             //Obliczanie liczby bajtów, jaką da się zapisa
 1916               	.LM167:
 1917 0544 8A81      		ldd r24,Y+2
 1918 0546 00E0      		ldi r16,lo8(256)
 1919 0548 11E0      		ldi r17,hi8(256)
 1920 054a 081B      		sub r16,r24
 1921 054c 1109      		sbc r17,__zero_reg__
 348:../../freeRtos/Lib/ramdysk.c ****   uint16_t doZapisu = *dlugosc;
 1923               	.LM168:
 1924 054e F501      		movw r30,r10
 1925 0550 E080      		ld r14,Z
 1926 0552 F180      		ldd r15,Z+1
 349:../../freeRtos/Lib/ramdysk.c ****   *dlugosc = 0;                                   //Jak do tąd jeszcze nic nie zapisano
 1928               	.LM169:
 1929 0554 1082      		st Z,__zero_reg__
 1930 0556 1182      		std Z+1,__zero_reg__
 350:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = 0;
 1932               	.LM170:
 1933 0558 DD24      		clr r13
 351:../../freeRtos/Lib/ramdysk.c ****   while (doZapisu > 0)
 1935               	.LM171:
 1936 055a 00C0      		rjmp .L102
 1937               	.L100:
 353:../../freeRtos/Lib/ramdysk.c ****     if (fd->IndLo == 0)                           //Jeśli indeks pokazuje na początek klastra, to
 1939               	.LM172:
 1940 055c 8A81      		ldd r24,Y+2
 1941 055e 8823      		tst r24
 1942 0560 01F4      		brne .L92
 355:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster == 0)                        //Pierwsza operacja zapisu, nie odczytano jeszcze
 1944               	.LM173:
 1945 0562 DD20      		tst r13
 1946 0564 01F4      		brne .L93
 356:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->IndHi); //Odczyt numeru klastra 
 1948               	.LM174:
 1949 0566 EC81      		ldd r30,Y+4
 1950 0568 FD81      		ldd r31,Y+5
 1951 056a 8081      		ld r24,Z
 1952 056c 6B81      		ldd r22,Y+3
 1953 056e 0E94 0000 		call znajdzKlasterN
 1954 0572 00C0      		rjmp .L103
 1955               	.L93:
 358:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = nastepnyKlaster(tmpKlaster); //Wystarczy przejść do następnego
 1957               	.LM175:
 1958 0574 8D2D      		mov r24,r13
 1959 0576 0E94 0000 		call nastepnyKlaster
 1960               	.L103:
 1961 057a D82E      		mov r13,r24
 359:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster == 0)                        //Sprawdzanie, czy udało się znaleźć klaster
 1963               	.LM176:
 1964 057c 8823      		tst r24
 1965 057e 01F4      		brne .+2
 1966 0580 00C0      		rjmp .L101
 362:../../freeRtos/Lib/ramdysk.c ****       fd->Wsk = dataPtr(tmpKlaster, 0);           //Ustawianie wskaźnika na początek klastra. Ter
 1968               	.LM177:
 1969 0582 90E0      		ldi r25,lo8(0)
 1970 0584 8058      		subi r24,lo8(-(128))
 1971 0586 9F4F      		sbci r25,hi8(-(128))
 1972 0588 1882      		st Y,__zero_reg__
 1973 058a 8983      		std Y+1,r24
 1974               	.L92:
 1975 058c 8881      		ld r24,Y
 1976 058e 9981      		ldd r25,Y+1
 364:../../freeRtos/Lib/ramdysk.c ****     if (doZapisu > dlBloku)                       //Sprawdzanie, czy wszystko uda się zapisać w b
 1978               	.LM178:
 1979 0590 0E15      		cp r16,r14
 1980 0592 1F05      		cpc r17,r15
 1981 0594 00F4      		brsh .L96
 366:../../freeRtos/Lib/ramdysk.c ****       memcpy(fd->Wsk, znaki, dlBloku);            //Zapis do końca aktualnego klastra
 1983               	.LM179:
 1984 0596 B401      		movw r22,r8
 1985 0598 A801      		movw r20,r16
 1986 059a 0E94 0000 		call memcpy
 367:../../freeRtos/Lib/ramdysk.c ****       znaki +=dlBloku;                      
 1988               	.LM180:
 1989 059e 800E      		add r8,r16
 1990 05a0 911E      		adc r9,r17
 368:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo = 0;                              //Mniej znaczący bajt odczytu wskazuje na począ
 1992               	.LM181:
 1993 05a2 1A82      		std Y+2,__zero_reg__
 369:../../freeRtos/Lib/ramdysk.c ****       doZapisu -= dlBloku;                        //Uaktualnianie informacji o liczbie bajtów jaka
 1995               	.LM182:
 1996 05a4 E01A      		sub r14,r16
 1997 05a6 F10A      		sbc r15,r17
 370:../../freeRtos/Lib/ramdysk.c ****       *dlugosc += dlBloku;                        //Uaktualnianie informacji o liczbie zapisanych d
 1999               	.LM183:
 2000 05a8 F501      		movw r30,r10
 2001 05aa 8081      		ld r24,Z
 2002 05ac 9181      		ldd r25,Z+1
 2003 05ae 800F      		add r24,r16
 2004 05b0 911F      		adc r25,r17
 2005 05b2 8083      		st Z,r24
 2006 05b4 9183      		std Z+1,r25
 371:../../freeRtos/Lib/ramdysk.c ****       fd->IndHi++;                                //Ustawienie bardziej znaczącego bajtu indeksu. 
 2008               	.LM184:
 2009 05b6 8B81      		ldd r24,Y+3
 2010 05b8 8F5F      		subi r24,lo8(-(1))
 2011 05ba 8B83      		std Y+3,r24
 372:../../freeRtos/Lib/ramdysk.c ****       dlBloku = 256;                              //Do następnego klastra możemy zapisać do 256 
 2013               	.LM185:
 2014 05bc 00E0      		ldi r16,lo8(256)
 2015 05be 11E0      		ldi r17,hi8(256)
 2016 05c0 00C0      		rjmp .L102
 2017               	.L96:
 376:../../freeRtos/Lib/ramdysk.c ****       memcpy(fd->Wsk, znaki, doZapisu);           //Ostatnia operacja zapisu do klasrta.
 2019               	.LM186:
 2020 05c2 B401      		movw r22,r8
 2021 05c4 A701      		movw r20,r14
 2022 05c6 0E94 0000 		call memcpy
 377:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo += doZapisu;                      //Uaktualnianie indeksu (wystarczy uaktualnić mn
 2024               	.LM187:
 2025 05ca 8A81      		ldd r24,Y+2
 2026 05cc 8E0D      		add r24,r14
 2027 05ce 8A83      		std Y+2,r24
 378:../../freeRtos/Lib/ramdysk.c ****       *dlugosc  += doZapisu;                      //Uaktualnianie informacji o liczbie zapisanych d
 2029               	.LM188:
 2030 05d0 F501      		movw r30,r10
 2031 05d2 8081      		ld r24,Z
 2032 05d4 9181      		ldd r25,Z+1
 2033 05d6 8E0D      		add r24,r14
 2034 05d8 9F1D      		adc r25,r15
 2035 05da 8083      		st Z,r24
 2036 05dc 9183      		std Z+1,r25
 380:../../freeRtos/Lib/ramdysk.c ****       fd->Wsk = dataPtr(tmpKlaster, fd->IndLo);   //Ustawianie wskaźnika w odpowiednie miejsce kla
 2038               	.LM189:
 2039 05de 8D2D      		mov r24,r13
 2040 05e0 90E0      		ldi r25,lo8(0)
 2041 05e2 8058      		subi r24,lo8(-(128))
 2042 05e4 9F4F      		sbci r25,hi8(-(128))
 2043 05e6 982F      		mov r25,r24
 2044 05e8 8827      		clr r24
 2045 05ea 2A81      		ldd r18,Y+2
 2046 05ec 820F      		add r24,r18
 2047 05ee 911D      		adc r25,__zero_reg__
 2048 05f0 8883      		st Y,r24
 2049 05f2 9983      		std Y+1,r25
 379:../../freeRtos/Lib/ramdysk.c ****       doZapisu  =  0;                             //Równie dobrze można tutaj wstawić break;
 2051               	.LM190:
 2052 05f4 EE24      		clr r14
 2053 05f6 FF24      		clr r15
 2054               	.L102:
 351:../../freeRtos/Lib/ramdysk.c ****   while (doZapisu > 0)
 2056               	.LM191:
 2057 05f8 E114      		cp r14,__zero_reg__
 2058 05fa F104      		cpc r15,__zero_reg__
 2059 05fc 01F0      		breq .+2
 2060 05fe 00C0      		rjmp .L100
 383:../../freeRtos/Lib/ramdysk.c ****   uaktualnijRozmiarPliku(fd);                     //Uaktualnianie rozmiaru pliku
 2062               	.LM192:
 2063 0600 CE01      		movw r24,r28
 2064 0602 0E94 0000 		call uaktualnijRozmiarPliku
 384:../../freeRtos/Lib/ramdysk.c ****   return 0;
 2066               	.LM193:
 2067 0606 80E0      		ldi r24,lo8(0)
 2068 0608 00C0      		rjmp .L95
 2069               	.L101:
 360:../../freeRtos/Lib/ramdysk.c ****         return 1;                                 //1 - Brak wolnego klastra
 2071               	.LM194:
 2072 060a 81E0      		ldi r24,lo8(1)
 2073               	.L95:
 2074               	/* epilogue start */
 385:../../freeRtos/Lib/ramdysk.c **** }
 2076               	.LM195:
 2077 060c DF91      		pop r29
 2078 060e CF91      		pop r28
 2079 0610 1F91      		pop r17
 2080 0612 0F91      		pop r16
 2081 0614 FF90      		pop r15
 2082 0616 EF90      		pop r14
 2083 0618 DF90      		pop r13
 2084 061a BF90      		pop r11
 2085 061c AF90      		pop r10
 2086 061e 9F90      		pop r9
 2087 0620 8F90      		pop r8
 2088 0622 0895      		ret
 2095               	.Lscope17:
 2097               		.stabd	78,0,0
 2102               	.global	ramDyskCzytajBlokZPliku
 2104               	ramDyskCzytajBlokZPliku:
 2105               		.stabd	46,0,0
 388:../../freeRtos/Lib/ramdysk.c **** {
 2107               	.LM196:
 2108               	.LFBB18:
 2109 0624 8F92      		push r8
 2110 0626 9F92      		push r9
 2111 0628 BF92      		push r11
 2112 062a CF92      		push r12
 2113 062c DF92      		push r13
 2114 062e EF92      		push r14
 2115 0630 FF92      		push r15
 2116 0632 0F93      		push r16
 2117 0634 1F93      		push r17
 2118 0636 CF93      		push r28
 2119 0638 DF93      		push r29
 2120               	/* prologue: function */
 2121               	/* frame size = 0 */
 2122               	/* stack size = 11 */
 2123               	.L__stack_usage = 11
 2124 063a EC01      		movw r28,r24
 2125 063c 4B01      		movw r8,r22
 2126 063e 6A01      		movw r12,r20
 389:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 2128               	.LM197:
 2129 0640 EC81      		ldd r30,Y+4
 2130 0642 FD81      		ldd r31,Y+5
 2131 0644 8081      		ld r24,Z
 2132 0646 8823      		tst r24
 2133 0648 01F4      		brne .L105
 391:../../freeRtos/Lib/ramdysk.c ****     *dlugosc = 0;
 2135               	.LM198:
 2136 064a FA01      		movw r30,r20
 2137 064c 1082      		st Z,__zero_reg__
 2138 064e 1182      		std Z+1,__zero_reg__
 392:../../freeRtos/Lib/ramdysk.c ****     return 1;                         //1 - Plik jest pusty
 2140               	.LM199:
 2141 0650 81E0      		ldi r24,lo8(1)
 2142 0652 00C0      		rjmp .L106
 2143               	.L105:
 2144               	.LBB16:
 2145               	.LBB17:
  26:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->rozmiarHi > fd->IndHi)
 2147               	.LM200:
 2148 0654 2281      		ldd r18,Z+2
 2149 0656 8B81      		ldd r24,Y+3
 2150 0658 8217      		cp r24,r18
 2151 065a 00F0      		brlo .L107
  29:../../freeRtos/Lib/ramdysk.c ****   if ((fd->wpis->rozmiarHi == fd->IndHi) && (fd->wpis->rozmiarLo >= fd->IndLo))
 2153               	.LM201:
 2154 065c 2817      		cp r18,r24
 2155 065e 01F0      		breq .+2
 2156 0660 00C0      		rjmp .L108
 2157 0662 3181      		ldd r19,Z+1
 2158 0664 9A81      		ldd r25,Y+2
 2159 0666 3917      		cp r19,r25
 2160 0668 00F4      		brsh .+2
 2161 066a 00C0      		rjmp .L108
 2162               	.L107:
 2163               	.LBE17:
 2164               	.LBE16:
 400:../../freeRtos/Lib/ramdysk.c ****   uint16_t lDanych = (fd->wpis->rozmiarHi - fd->IndHi);
 2166               	.LM202:
 2167 066c 30E0      		ldi r19,lo8(0)
 2168 066e 281B      		sub r18,r24
 2169 0670 3109      		sbc r19,__zero_reg__
 401:../../freeRtos/Lib/ramdysk.c ****   lDanych +=fd->wpis->rozmiarLo;      //Obliczanie liczby bajtów jaka zostałą zapisana jeszcze z
 2171               	.LM203:
 2172 0672 8181      		ldd r24,Z+1
 2173 0674 90E0      		ldi r25,lo8(0)
 402:../../freeRtos/Lib/ramdysk.c ****   lDanych -=fd->IndLo;                //Na podstawie wcześniej sprawdzonych warunków jest to zaws
 2175               	.LM204:
 2176 0676 4A81      		ldd r20,Y+2
 401:../../freeRtos/Lib/ramdysk.c ****   lDanych +=fd->wpis->rozmiarLo;      //Obliczanie liczby bajtów jaka zostałą zapisana jeszcze z
 2178               	.LM205:
 2179 0678 841B      		sub r24,r20
 2180 067a 9109      		sbc r25,__zero_reg__
 402:../../freeRtos/Lib/ramdysk.c ****   lDanych -=fd->IndLo;                //Na podstawie wcześniej sprawdzonych warunków jest to zaws
 2182               	.LM206:
 2183 067c 820F      		add r24,r18
 2184 067e 931F      		adc r25,r19
 404:../../freeRtos/Lib/ramdysk.c ****   uint16_t doOdczytania = (lDanych < *dlugosc)?  //Sprawdzenie liczby zapisanych bajtół w pliku i
 2186               	.LM207:
 2187 0680 F601      		movw r30,r12
 2188 0682 0081      		ld r16,Z
 2189 0684 1181      		ldd r17,Z+1
 2190 0686 8017      		cp r24,r16
 2191 0688 9107      		cpc r25,r17
 2192 068a 00F4      		brsh .L109
 2193 068c 8C01      		movw r16,r24
 2194               	.L109:
 407:../../freeRtos/Lib/ramdysk.c ****   *dlugosc = 0;                        //Jak do tąd odczytano 0 bajtów
 2196               	.LM208:
 2197 068e F601      		movw r30,r12
 2198 0690 1082      		st Z,__zero_reg__
 2199 0692 1182      		std Z+1,__zero_reg__
 408:../../freeRtos/Lib/ramdysk.c ****   uint16_t dlBloku = 256 - fd->IndLo;  //Określanie liczby bajtół jaka zostałą do końca aktua
 2201               	.LM209:
 2202 0694 8A81      		ldd r24,Y+2
 2203 0696 E12C      		mov r14,__zero_reg__
 2204 0698 E1E0      		ldi r30,hi8(256)
 2205 069a FE2E      		mov r15,r30
 2206 069c E81A      		sub r14,r24
 2207 069e F108      		sbc r15,__zero_reg__
 409:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = 0;
 2209               	.LM210:
 2210 06a0 BB24      		clr r11
 410:../../freeRtos/Lib/ramdysk.c ****   while (doOdczytania > 0)
 2212               	.LM211:
 2213 06a2 00C0      		rjmp .L120
 2214               	.L118:
 412:../../freeRtos/Lib/ramdysk.c ****     if (fd->IndLo == 0)                //Indeks odczytu wskazuje na początek klastra. Oznacza to, 
 2216               	.LM212:
 2217 06a4 8A81      		ldd r24,Y+2
 2218 06a6 8823      		tst r24
 2219 06a8 01F4      		brne .L111
 414:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster == 0)
 2221               	.LM213:
 2222 06aa BB20      		tst r11
 2223 06ac 01F4      		brne .L112
 415:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->IndHi); 
 2225               	.LM214:
 2226 06ae EC81      		ldd r30,Y+4
 2227 06b0 FD81      		ldd r31,Y+5
 2228 06b2 8081      		ld r24,Z
 2229 06b4 6B81      		ldd r22,Y+3
 2230 06b6 0E94 0000 		call znajdzKlasterN
 2231 06ba 00C0      		rjmp .L121
 2232               	.L112:
 417:../../freeRtos/Lib/ramdysk.c ****         tmpKlaster = nastepnyKlaster(tmpKlaster);
 2234               	.LM215:
 2235 06bc 8B2D      		mov r24,r11
 2236 06be 0E94 0000 		call nastepnyKlaster
 2237               	.L121:
 2238 06c2 B82E      		mov r11,r24
 418:../../freeRtos/Lib/ramdysk.c ****       if (tmpKlaster != 0)             //Jeśli znaleziono odpowiedni klaster, to
 2240               	.LM216:
 2241 06c4 8823      		tst r24
 2242 06c6 01F0      		breq .L119
 419:../../freeRtos/Lib/ramdysk.c ****         fd->Wsk = dataPtr(tmpKlaster, 0); //przestaw wskaźnik na początek tego klastra
 2244               	.LM217:
 2245 06c8 90E0      		ldi r25,lo8(0)
 2246 06ca 8058      		subi r24,lo8(-(128))
 2247 06cc 9F4F      		sbci r25,hi8(-(128))
 2248 06ce 1882      		st Y,__zero_reg__
 2249 06d0 8983      		std Y+1,r24
 2250               	.L111:
 2251 06d2 6881      		ld r22,Y
 2252 06d4 7981      		ldd r23,Y+1
 424:../../freeRtos/Lib/ramdysk.c ****     if (doOdczytania > dlBloku)        //Odczyt do końca zawartości klastra
 2254               	.LM218:
 2255 06d6 E016      		cp r14,r16
 2256 06d8 F106      		cpc r15,r17
 2257 06da 00F4      		brsh .L114
 426:../../freeRtos/Lib/ramdysk.c ****       memcpy(znaki, fd->Wsk, dlBloku); //Odczyt zawartości Klastra
 2259               	.LM219:
 2260 06dc C401      		movw r24,r8
 2261 06de A701      		movw r20,r14
 2262 06e0 0E94 0000 		call memcpy
 427:../../freeRtos/Lib/ramdysk.c ****       znaki +=dlBloku;                 //Przestawienie wskaźnika do tablicy, w której zapisujemy 
 2264               	.LM220:
 2265 06e4 8E0C      		add r8,r14
 2266 06e6 9F1C      		adc r9,r15
 428:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo = 0;                   //Indeks wskazuje na początek nowego klastra
 2268               	.LM221:
 2269 06e8 1A82      		std Y+2,__zero_reg__
 429:../../freeRtos/Lib/ramdysk.c ****       fd->IndHi++;                     //Bardziej znaczący bajt określa zmianę klastra. Teraz ni
 2271               	.LM222:
 2272 06ea 8B81      		ldd r24,Y+3
 2273 06ec 8F5F      		subi r24,lo8(-(1))
 2274 06ee 8B83      		std Y+3,r24
 430:../../freeRtos/Lib/ramdysk.c ****       doOdczytania -= dlBloku;         //Uaktualnienie liczby bajtół jaką należy odczytać
 2276               	.LM223:
 2277 06f0 0E19      		sub r16,r14
 2278 06f2 1F09      		sbc r17,r15
 431:../../freeRtos/Lib/ramdysk.c ****       *dlugosc += dlBloku;             //Uaktualnienie 
 2280               	.LM224:
 2281 06f4 F601      		movw r30,r12
 2282 06f6 8081      		ld r24,Z
 2283 06f8 9181      		ldd r25,Z+1
 2284 06fa 8E0D      		add r24,r14
 2285 06fc 9F1D      		adc r25,r15
 2286 06fe 8083      		st Z,r24
 2287 0700 9183      		std Z+1,r25
 432:../../freeRtos/Lib/ramdysk.c ****       dlBloku = 256;                   //Kolejny dostępny blok do odczytania, to długość całeg
 2289               	.LM225:
 2290 0702 E12C      		mov r14,__zero_reg__
 2291 0704 71E0      		ldi r23,hi8(256)
 2292 0706 F72E      		mov r15,r23
 2293 0708 00C0      		rjmp .L120
 2294               	.L114:
 436:../../freeRtos/Lib/ramdysk.c ****       memcpy(znaki, fd->Wsk, doOdczytania);
 2296               	.LM226:
 2297 070a C401      		movw r24,r8
 2298 070c A801      		movw r20,r16
 2299 070e 0E94 0000 		call memcpy
 437:../../freeRtos/Lib/ramdysk.c ****       fd->Wsk   += doOdczytania;       //Po zakończeniu operacji odczytu nadal działamy w tym sam
 2301               	.LM227:
 2302 0712 8881      		ld r24,Y
 2303 0714 9981      		ldd r25,Y+1
 2304 0716 800F      		add r24,r16
 2305 0718 911F      		adc r25,r17
 2306 071a 8883      		st Y,r24
 2307 071c 9983      		std Y+1,r25
 438:../../freeRtos/Lib/ramdysk.c ****       fd->IndLo += doOdczytania;       //Uaktualnianie indeksu. Jesteśmy w tym samym klastrze, zat
 2309               	.LM228:
 2310 071e 8A81      		ldd r24,Y+2
 2311 0720 800F      		add r24,r16
 2312 0722 8A83      		std Y+2,r24
 439:../../freeRtos/Lib/ramdysk.c ****       *dlugosc  += doOdczytania;       //Uaktualnianie liczby odczytanych bajtów                  
 2314               	.LM229:
 2315 0724 F601      		movw r30,r12
 2316 0726 8081      		ld r24,Z
 2317 0728 9181      		ldd r25,Z+1
 2318 072a 800F      		add r24,r16
 2319 072c 911F      		adc r25,r17
 2320 072e 8083      		st Z,r24
 2321 0730 9183      		std Z+1,r25
 440:../../freeRtos/Lib/ramdysk.c ****       doOdczytania = 0;                //Tutaj równie dobrze może być brake
 2323               	.LM230:
 2324 0732 00E0      		ldi r16,lo8(0)
 2325 0734 10E0      		ldi r17,hi8(0)
 2326               	.L120:
 410:../../freeRtos/Lib/ramdysk.c ****   while (doOdczytania > 0)
 2328               	.LM231:
 2329 0736 0115      		cp r16,__zero_reg__
 2330 0738 1105      		cpc r17,__zero_reg__
 2331 073a 01F0      		breq .+2
 2332 073c 00C0      		rjmp .L118
 443:../../freeRtos/Lib/ramdysk.c ****   return 0;
 2334               	.LM232:
 2335 073e 80E0      		ldi r24,lo8(0)
 2336 0740 00C0      		rjmp .L106
 2337               	.L119:
 421:../../freeRtos/Lib/ramdysk.c ****         return 3;                      //3 - Nie udało się znaleźć odpowiedniego klastra
 2339               	.LM233:
 2340 0742 83E0      		ldi r24,lo8(3)
 2341               	.L106:
 2342               	/* epilogue start */
 444:../../freeRtos/Lib/ramdysk.c **** }
 2344               	.LM234:
 2345 0744 DF91      		pop r29
 2346 0746 CF91      		pop r28
 2347 0748 1F91      		pop r17
 2348 074a 0F91      		pop r16
 2349 074c FF90      		pop r15
 2350 074e EF90      		pop r14
 2351 0750 DF90      		pop r13
 2352 0752 CF90      		pop r12
 2353 0754 BF90      		pop r11
 2354 0756 9F90      		pop r9
 2355 0758 8F90      		pop r8
 2356 075a 0895      		ret
 2357               	.L108:
 396:../../freeRtos/Lib/ramdysk.c ****     *dlugosc = 0;
 2359               	.LM235:
 2360 075c F601      		movw r30,r12
 2361 075e 1082      		st Z,__zero_reg__
 2362 0760 1182      		std Z+1,__zero_reg__
 397:../../freeRtos/Lib/ramdysk.c ****     return 2;                         //2 - Źle ustawiony indeks odczytu/zapisu (poza obszarem pli
 2364               	.LM236:
 2365 0762 82E0      		ldi r24,lo8(2)
 2366 0764 00C0      		rjmp .L106
 2373               	.Lscope18:
 2375               		.stabd	78,0,0
 2379               	.global	ramDyskUstawWskaznik
 2381               	ramDyskUstawWskaznik:
 2382               		.stabd	46,0,0
 447:../../freeRtos/Lib/ramdysk.c **** {
 2384               	.LM237:
 2385               	.LFBB19:
 2386 0766 EF92      		push r14
 2387 0768 FF92      		push r15
 2388 076a 0F93      		push r16
 2389 076c 1F93      		push r17
 2390 076e CF93      		push r28
 2391 0770 DF93      		push r29
 2392               	/* prologue: function */
 2393               	/* frame size = 0 */
 2394               	/* stack size = 6 */
 2395               	.L__stack_usage = 6
 2396 0772 EC01      		movw r28,r24
 448:../../freeRtos/Lib/ramdysk.c ****   if (indeks == 0)                                        //Sprawdzanie, czy wskaźnik nie pokazuje
 2398               	.LM238:
 2399 0774 6115      		cp r22,__zero_reg__
 2400 0776 7105      		cpc r23,__zero_reg__
 2401 0778 01F4      		brne .L123
 450:../../freeRtos/Lib/ramdysk.c ****     fd->IndLo = 0;                                        //Ustawianie na 0 indeksów (mniej i bard
 2403               	.LM239:
 2404 077a 1A82      		std Y+2,__zero_reg__
 451:../../freeRtos/Lib/ramdysk.c ****     fd->IndHi = 0;
 2406               	.LM240:
 2407 077c 1B82      		std Y+3,__zero_reg__
 2408 077e 00C0      		rjmp .L128
 2409               	.L123:
 454:../../freeRtos/Lib/ramdysk.c ****   indeks--;                                               //Zmniejszamy indeks o 1, by odpowiednio 
 2411               	.LM241:
 2412 0780 8B01      		movw r16,r22
 2413 0782 0150      		subi r16,lo8(-(-1))
 2414 0784 1040      		sbci r17,hi8(-(-1))
 457:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)                     //Sprawdzanie, czy plik ma już przydziel
 2416               	.LM242:
 2417 0786 EC80      		ldd r14,Y+4
 2418 0788 FD80      		ldd r15,Y+5
 2419 078a F701      		movw r30,r14
 2420 078c 8081      		ld r24,Z
 2421 078e 8823      		tst r24
 2422 0790 01F4      		brne .L125
 458:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->pierwszyKlaster = znajdzWolnyKlaster();     //Przydzielanie pierwszego klastra dla pl
 2424               	.LM243:
 2425 0792 0E94 0000 		call znajdzWolnyKlaster
 2426 0796 F701      		movw r30,r14
 2427 0798 8083      		st Z,r24
 2428               	.L125:
 462:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo = indeks & 0xFF;                              //Obliczanie na podstawie wartości 16 mn
 2430               	.LM244:
 2431 079a 0A83      		std Y+2,r16
 463:../../freeRtos/Lib/ramdysk.c ****   fd->IndHi = klasterN;                                   //oraz bardziej znaczącego bajtu indeksu
 2433               	.LM245:
 2434 079c 1B83      		std Y+3,r17
 465:../../freeRtos/Lib/ramdysk.c ****   uint8_t nrKlastra = znajdzKlasterN(fd->wpis->pierwszyKlaster, klasterN);
 2436               	.LM246:
 2437 079e EC81      		ldd r30,Y+4
 2438 07a0 FD81      		ldd r31,Y+5
 2439 07a2 8081      		ld r24,Z
 2440 07a4 612F      		mov r22,r17
 2441 07a6 0E94 0000 		call znajdzKlasterN
 2442 07aa 082F      		mov r16,r24
 466:../../freeRtos/Lib/ramdysk.c ****   if (nrKlastra == 0)
 2444               	.LM247:
 2445 07ac 8823      		tst r24
 2446 07ae 01F0      		breq .L127
 469:../../freeRtos/Lib/ramdysk.c ****   uaktualnijRozmiarPliku(fd);                             //Uaktualnianie rozmiaru pliku
 2448               	.LM248:
 2449 07b0 CE01      		movw r24,r28
 2450 07b2 0E94 0000 		call uaktualnijRozmiarPliku
 471:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo++;                                            //Powrót do zadanej wartości indeksu
 2452               	.LM249:
 2453 07b6 2A81      		ldd r18,Y+2
 2454 07b8 2F5F      		subi r18,lo8(-(1))
 2455 07ba 2A83      		std Y+2,r18
 472:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo == 0)                                     //Jeśli jesteśmy na początku klastra, 
 2457               	.LM250:
 2458 07bc 2223      		tst r18
 2459 07be 01F4      		brne .L126
 473:../../freeRtos/Lib/ramdysk.c ****     fd->IndHi++;                                          //Uaktualniamy tylko bardziej znaczący b
 2461               	.LM251:
 2462 07c0 8B81      		ldd r24,Y+3
 2463 07c2 8F5F      		subi r24,lo8(-(1))
 2464 07c4 8B83      		std Y+3,r24
 2465 07c6 00C0      		rjmp .L128
 2466               	.L126:
 475:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk=dataPtr(nrKlastra, fd->IndLo);                //ustawić wskaźnik na odpowiednie miejs
 2468               	.LM252:
 2469 07c8 802F      		mov r24,r16
 2470 07ca 90E0      		ldi r25,lo8(0)
 2471 07cc 8058      		subi r24,lo8(-(128))
 2472 07ce 9F4F      		sbci r25,hi8(-(128))
 2473 07d0 982F      		mov r25,r24
 2474 07d2 8827      		clr r24
 2475 07d4 820F      		add r24,r18
 2476 07d6 911D      		adc r25,__zero_reg__
 2477 07d8 8883      		st Y,r24
 2478 07da 9983      		std Y+1,r25
 2479               	.L128:
 477:../../freeRtos/Lib/ramdysk.c ****   return 0; 
 2481               	.LM253:
 2482 07dc 80E0      		ldi r24,lo8(0)
 2483 07de 00C0      		rjmp .L124
 2484               	.L127:
 467:../../freeRtos/Lib/ramdysk.c ****     return 1;                                             //Brak klastrów
 2486               	.LM254:
 2487 07e0 81E0      		ldi r24,lo8(1)
 2488               	.L124:
 2489               	/* epilogue start */
 478:../../freeRtos/Lib/ramdysk.c **** }
 2491               	.LM255:
 2492 07e2 DF91      		pop r29
 2493 07e4 CF91      		pop r28
 2494 07e6 1F91      		pop r17
 2495 07e8 0F91      		pop r16
 2496 07ea FF90      		pop r15
 2497 07ec EF90      		pop r14
 2498 07ee 0895      		ret
 2503               	.Lscope19:
 2505               		.stabd	78,0,0
 2508               	.global	ramDyskUstawWskaznikNaKoniec
 2510               	ramDyskUstawWskaznikNaKoniec:
 2511               		.stabd	46,0,0
 481:../../freeRtos/Lib/ramdysk.c **** {
 2513               	.LM256:
 2514               	.LFBB20:
 2515 07f0 CF93      		push r28
 2516 07f2 DF93      		push r29
 2517               	/* prologue: function */
 2518               	/* frame size = 0 */
 2519               	/* stack size = 2 */
 2520               	.L__stack_usage = 2
 2521 07f4 EC01      		movw r28,r24
 482:../../freeRtos/Lib/ramdysk.c ****   if (fd == NULL)
 2523               	.LM257:
 2524 07f6 0097      		sbiw r24,0
 2525 07f8 01F0      		breq .L131
 484:../../freeRtos/Lib/ramdysk.c ****   fd->IndLo = fd->wpis->rozmiarLo;
 2527               	.LM258:
 2528 07fa EC81      		ldd r30,Y+4
 2529 07fc FD81      		ldd r31,Y+5
 2530 07fe 8181      		ldd r24,Z+1
 2531 0800 8A83      		std Y+2,r24
 485:../../freeRtos/Lib/ramdysk.c ****   fd->IndHi = fd->wpis->rozmiarHi;
 2533               	.LM259:
 2534 0802 9281      		ldd r25,Z+2
 2535 0804 9B83      		std Y+3,r25
 488:../../freeRtos/Lib/ramdysk.c ****   if (fd->IndLo != 0)
 2537               	.LM260:
 2538 0806 8823      		tst r24
 2539 0808 01F0      		breq .L132
 490:../../freeRtos/Lib/ramdysk.c ****     tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster, fd->wpis->rozmiarHi);
 2541               	.LM261:
 2542 080a 8081      		ld r24,Z
 2543 080c 6281      		ldd r22,Z+2
 2544 080e 0E94 0000 		call znajdzKlasterN
 491:../../freeRtos/Lib/ramdysk.c ****     fd->Wsk=dataPtr(tmpKlaster, fd->IndLo);
 2546               	.LM262:
 2547 0812 90E0      		ldi r25,lo8(0)
 2548 0814 8058      		subi r24,lo8(-(128))
 2549 0816 9F4F      		sbci r25,hi8(-(128))
 2550 0818 982F      		mov r25,r24
 2551 081a 8827      		clr r24
 2552 081c 2A81      		ldd r18,Y+2
 2553 081e 820F      		add r24,r18
 2554 0820 911D      		adc r25,__zero_reg__
 2555 0822 8883      		st Y,r24
 2556 0824 9983      		std Y+1,r25
 2557 0826 00C0      		rjmp .L132
 2558               	.L131:
 483:../../freeRtos/Lib/ramdysk.c ****     return 1;
 2560               	.LM263:
 2561 0828 81E0      		ldi r24,lo8(1)
 2562 082a 00C0      		rjmp .L130
 2563               	.L132:
 493:../../freeRtos/Lib/ramdysk.c ****   return 0;
 2565               	.LM264:
 2566 082c 80E0      		ldi r24,lo8(0)
 2567               	.L130:
 2568               	/* epilogue start */
 494:../../freeRtos/Lib/ramdysk.c **** }
 2570               	.LM265:
 2571 082e DF91      		pop r29
 2572 0830 CF91      		pop r28
 2573 0832 0895      		ret
 2575               	.Lscope20:
 2577               		.stabd	78,0,0
 2581               	.global	ramDyskDodajBlokXmodem
 2583               	ramDyskDodajBlokXmodem:
 2584               		.stabd	46,0,0
 497:../../freeRtos/Lib/ramdysk.c **** {
 2586               	.LM266:
 2587               	.LFBB21:
 2588 0834 BF92      		push r11
 2589 0836 CF92      		push r12
 2590 0838 DF92      		push r13
 2591 083a EF92      		push r14
 2592 083c FF92      		push r15
 2593 083e 0F93      		push r16
 2594 0840 1F93      		push r17
 2595 0842 CF93      		push r28
 2596 0844 DF93      		push r29
 2597               	/* prologue: function */
 2598               	/* frame size = 0 */
 2599               	/* stack size = 9 */
 2600               	.L__stack_usage = 9
 2601 0846 8C01      		movw r16,r24
 2602 0848 6B01      		movw r12,r22
 498:../../freeRtos/Lib/ramdysk.c ****   if (nrBloku == 0)
 2604               	.LM267:
 2605 084a 6115      		cp r22,__zero_reg__
 2606 084c 7105      		cpc r23,__zero_reg__
 2607 084e 01F4      		brne .+2
 2608 0850 00C0      		rjmp .L142
 506:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 2610               	.LM268:
 2611 0852 DC01      		movw r26,r24
 2612 0854 1496      		adiw r26,4
 2613 0856 ED90      		ld r14,X+
 2614 0858 FC90      		ld r15,X
 2615 085a 1597      		sbiw r26,4+1
 2616 085c F701      		movw r30,r14
 2617 085e 8081      		ld r24,Z
 2618 0860 8823      		tst r24
 2619 0862 01F4      		brne .L135
 507:../../freeRtos/Lib/ramdysk.c ****     fd->wpis->pierwszyKlaster = znajdzWolnyKlaster();
 2621               	.LM269:
 2622 0864 0E94 0000 		call znajdzWolnyKlaster
 2623 0868 D701      		movw r26,r14
 2624 086a 8C93      		st X,r24
 2625               	.L135:
 508:../../freeRtos/Lib/ramdysk.c ****   if (fd->wpis->pierwszyKlaster == 0)
 2627               	.LM270:
 2628 086c D801      		movw r26,r16
 2629 086e 1496      		adiw r26,4
 2630 0870 ED91      		ld r30,X+
 2631 0872 FC91      		ld r31,X
 2632 0874 1597      		sbiw r26,4+1
 2633 0876 8081      		ld r24,Z
 2634 0878 8823      		tst r24
 2635 087a 01F0      		breq .L142
 500:../../freeRtos/Lib/ramdysk.c ****   nrBloku --;
 2637               	.LM271:
 2638 087c 0894      		sec
 2639 087e C108      		sbc r12,__zero_reg__
 2640 0880 D108      		sbc r13,__zero_reg__
 502:../../freeRtos/Lib/ramdysk.c ****   uint8_t indHi = (uint8_t)(nrBloku / 2);
 2642               	.LM272:
 2643 0882 7601      		movw r14,r12
 2644 0884 F694      		lsr r15
 2645 0886 E794      		ror r14
 2646 0888 BE2C      		mov r11,r14
 511:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = znajdzKlasterN(fd->wpis->pierwszyKlaster , indHi);
 2648               	.LM273:
 2649 088a 6E2D      		mov r22,r14
 2650 088c 0E94 0000 		call znajdzKlasterN
 512:../../freeRtos/Lib/ramdysk.c ****   if (tmpKlaster == 0)
 2652               	.LM274:
 2653 0890 8823      		tst r24
 2654 0892 01F0      		breq .L142
 2655 0894 D801      		movw r26,r16
 2656 0896 1496      		adiw r26,4
 2657 0898 ED91      		ld r30,X+
 2658 089a FC91      		ld r31,X
 2659 089c 1597      		sbiw r26,4+1
 514:../../freeRtos/Lib/ramdysk.c ****   if ((nrBloku & 0x0001) == 0x0001)           // Druga część klastra
 2661               	.LM275:
 2662 089e C0FE      		sbrs r12,0
 2663 08a0 00C0      		rjmp .L136
 517:../../freeRtos/Lib/ramdysk.c ****     if (fd->wpis->rozmiarHi <= indHi)
 2665               	.LM276:
 2666 08a2 9281      		ldd r25,Z+2
 2667 08a4 E916      		cp r14,r25
 2668 08a6 00F0      		brlo .L137
 519:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarHi = indHi+1;
 2670               	.LM277:
 2671 08a8 B394      		inc r11
 2672 08aa B282      		std Z+2,r11
 520:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = 0;
 2674               	.LM278:
 2675 08ac 1496      		adiw r26,4
 2676 08ae ED91      		ld r30,X+
 2677 08b0 FC91      		ld r31,X
 2678 08b2 1597      		sbiw r26,4+1
 2679 08b4 1182      		std Z+1,__zero_reg__
 2680               	.L137:
 522:../../freeRtos/Lib/ramdysk.c ****     wynik=dataPtr(tmpKlaster, 128);
 2682               	.LM279:
 2683 08b6 80E0      		ldi r24,lo8(0)
 2684 08b8 EC01      		movw r28,r24
 2685 08ba C058      		subi r28,lo8(-(-32640))
 2686 08bc DF47      		sbci r29,hi8(-(-32640))
 2687 08be 00C0      		rjmp .L134
 2688               	.L136:
 526:../../freeRtos/Lib/ramdysk.c ****     if (fd->wpis->rozmiarHi < indHi)
 2690               	.LM280:
 2691 08c0 9281      		ldd r25,Z+2
 2692 08c2 9E15      		cp r25,r14
 2693 08c4 00F4      		brsh .L138
 528:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarHi = indHi;
 2695               	.LM281:
 2696 08c6 E282      		std Z+2,r14
 529:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = 128;
 2698               	.LM282:
 2699 08c8 D801      		movw r26,r16
 2700 08ca 1496      		adiw r26,4
 2701 08cc ED91      		ld r30,X+
 2702 08ce FC91      		ld r31,X
 2703 08d0 1597      		sbiw r26,4+1
 2704 08d2 00C0      		rjmp .L143
 2705               	.L138:
 531:../../freeRtos/Lib/ramdysk.c ****     else if ((fd->wpis->rozmiarHi == indHi) && (fd->wpis->rozmiarLo < 128))
 2707               	.LM283:
 2708 08d4 9E15      		cp r25,r14
 2709 08d6 01F4      		brne .L139
 531:../../freeRtos/Lib/ramdysk.c ****     else if ((fd->wpis->rozmiarHi == indHi) && (fd->wpis->rozmiarLo < 128))
 2711               	.LM284:
 2712 08d8 9181      		ldd r25,Z+1
 2713 08da 97FD      		sbrc r25,7
 2714 08dc 00C0      		rjmp .L139
 2715               	.L143:
 532:../../freeRtos/Lib/ramdysk.c ****       fd->wpis->rozmiarLo = 128;
 2717               	.LM285:
 2718 08de 90E8      		ldi r25,lo8(-128)
 2719 08e0 9183      		std Z+1,r25
 2720               	.L139:
 534:../../freeRtos/Lib/ramdysk.c ****     wynik=dataPtr(tmpKlaster, 0);
 2722               	.LM286:
 2723 08e2 C82F      		mov r28,r24
 2724 08e4 D0E0      		ldi r29,lo8(0)
 2725 08e6 C058      		subi r28,lo8(-(128))
 2726 08e8 DF4F      		sbci r29,hi8(-(128))
 2727 08ea DC2F      		mov r29,r28
 2728 08ec CC27      		clr r28
 2729 08ee 00C0      		rjmp .L134
 2730               	.L142:
 513:../../freeRtos/Lib/ramdysk.c ****     return NULL;
 2732               	.LM287:
 2733 08f0 C0E0      		ldi r28,lo8(0)
 2734 08f2 D0E0      		ldi r29,hi8(0)
 2735               	.L134:
 537:../../freeRtos/Lib/ramdysk.c **** }
 2737               	.LM288:
 2738 08f4 CE01      		movw r24,r28
 2739               	/* epilogue start */
 2740 08f6 DF91      		pop r29
 2741 08f8 CF91      		pop r28
 2742 08fa 1F91      		pop r17
 2743 08fc 0F91      		pop r16
 2744 08fe FF90      		pop r15
 2745 0900 EF90      		pop r14
 2746 0902 DF90      		pop r13
 2747 0904 CF90      		pop r12
 2748 0906 BF90      		pop r11
 2749 0908 0895      		ret
 2756               	.Lscope21:
 2758               		.stabd	78,0,0
 2759               		.data
 2760               	.LC0:
 2761 0000 6E61 7A77 		.string	"nazwa\t\trozmiar\totwarty\r\n"
 2761      6109 0972 
 2761      6F7A 6D69 
 2761      6172 096F 
 2761      7477 6172 
 2762               	.LC1:
 2763 0019 0925 6409 		.string	"\t%d\t%d\r\n"
 2763      2564 0D0A 
 2763      00
 2764               		.text
 2767               	.global	ramDyskDir
 2769               	ramDyskDir:
 2770               		.stabd	46,0,0
 540:../../freeRtos/Lib/ramdysk.c **** {
 2772               	.LM289:
 2773               	.LFBB22:
 2774 090a 2F92      		push r2
 2775 090c 3F92      		push r3
 2776 090e 4F92      		push r4
 2777 0910 5F92      		push r5
 2778 0912 6F92      		push r6
 2779 0914 7F92      		push r7
 2780 0916 9F92      		push r9
 2781 0918 AF92      		push r10
 2782 091a BF92      		push r11
 2783 091c CF92      		push r12
 2784 091e DF92      		push r13
 2785 0920 EF92      		push r14
 2786 0922 FF92      		push r15
 2787 0924 0F93      		push r16
 2788 0926 1F93      		push r17
 2789 0928 CF93      		push r28
 2790 092a DF93      		push r29
 2791               	/* prologue: function */
 2792               	/* frame size = 0 */
 2793               	/* stack size = 17 */
 2794               	.L__stack_usage = 17
 2795 092c 8C01      		movw r16,r24
 541:../../freeRtos/Lib/ramdysk.c ****   fprintf(ostream, "nazwa\t\trozmiar\totwarty\r\n");
 2797               	.LM290:
 2798 092e 80E0      		ldi r24,lo8(.LC0)
 2799 0930 90E0      		ldi r25,hi8(.LC0)
 2800 0932 B801      		movw r22,r16
 2801 0934 0E94 0000 		call fputs
 543:../../freeRtos/Lib/ramdysk.c ****   uint8_t tmpKlaster = 0;
 2803               	.LM291:
 2804 0938 AA24      		clr r10
 565:../../freeRtos/Lib/ramdysk.c ****       fprintf(ostream, "\t%d\t%d\r\n", 256*plik->rozmiarHi+plik->rozmiarLo,  plik->lAktOtw);
 2806               	.LM292:
 2807 093a 40E0      		ldi r20,lo8(.LC1)
 2808 093c 242E      		mov r2,r20
 2809 093e 40E0      		ldi r20,hi8(.LC1)
 2810 0940 342E      		mov r3,r20
 2811 0942 00C0      		rjmp .L150
 2812               	.L151:
 569:../../freeRtos/Lib/ramdysk.c ****     tmpKlaster = klastry[tmpKlaster];
 2814               	.LM293:
 2815 0944 A82E      		mov r10,r24
 2816               	.L150:
 548:../../freeRtos/Lib/ramdysk.c ****     plik = (struct ramPlik *)(dataPtr(tmpKlaster, 0));
 2818               	.LM294:
 2819 0946 CA2C      		mov r12,r10
 2820 0948 DD24      		clr r13
 2821 094a E601      		movw r28,r12
 2822 094c C058      		subi r28,lo8(-(128))
 2823 094e DF4F      		sbci r29,hi8(-(128))
 2824 0950 DC2F      		mov r29,r28
 2825 0952 CC27      		clr r28
 539:../../freeRtos/Lib/ramdysk.c **** void ramDyskDir(FILE *ostream)
 2827               	.LM295:
 2828 0954 20EF      		ldi r18,lo8(240)
 2829 0956 622E      		mov r6,r18
 2830 0958 712C      		mov r7,__zero_reg__
 2831 095a 6C0E      		add r6,r28
 2832 095c 7D1E      		adc r7,r29
 2833               	.L149:
 551:../../freeRtos/Lib/ramdysk.c ****       tmp3=plik->nazwa[0];
 2835               	.LM296:
 2836 095e BC80      		ldd r11,Y+4
 552:../../freeRtos/Lib/ramdysk.c ****       if (tmp3 == 0)
 2838               	.LM297:
 2839 0960 BB20      		tst r11
 2840 0962 01F4      		brne .+2
 2841 0964 00C0      		rjmp .L145
 554:../../freeRtos/Lib/ramdysk.c ****       fputc(tmp3         , ostream);
 2843               	.LM298:
 2844 0966 8B2D      		mov r24,r11
 2845 0968 90E0      		ldi r25,lo8(0)
 2846 096a B801      		movw r22,r16
 2847 096c 0E94 0000 		call fputc
 2848 0970 7E01      		movw r14,r28
 555:../../freeRtos/Lib/ramdysk.c ****       for (tmp2=1; tmp2<8; tmp2++)
 2850               	.LM299:
 2851 0972 9924      		clr r9
 2852 0974 9394      		inc r9
 2853               	.L148:
 557:../../freeRtos/Lib/ramdysk.c ****         if (tmp3 != 0)
 2855               	.LM300:
 2856 0976 BB20      		tst r11
 2857 0978 01F0      		breq .L146
 558:../../freeRtos/Lib/ramdysk.c ****           tmp3=plik->nazwa[tmp2];
 2859               	.LM301:
 2860 097a D701      		movw r26,r14
 2861 097c 1596      		adiw r26,5
 2862 097e BC90      		ld r11,X
 2863 0980 1597      		sbiw r26,5
 560:../../freeRtos/Lib/ramdysk.c ****         if (tmp3 != 0)
 2865               	.LM302:
 2866 0982 BB20      		tst r11
 2867 0984 01F0      		breq .L146
 561:../../freeRtos/Lib/ramdysk.c ****           fputc(tmp3     , ostream);
 2869               	.LM303:
 2870 0986 8B2D      		mov r24,r11
 2871 0988 90E0      		ldi r25,lo8(0)
 2872 098a B801      		movw r22,r16
 2873 098c 0E94 0000 		call fputc
 2874 0990 00C0      		rjmp .L147
 2875               	.L146:
 563:../../freeRtos/Lib/ramdysk.c ****           fputc(' '      , ostream);
 2877               	.LM304:
 2878 0992 80E2      		ldi r24,lo8(32)
 2879 0994 90E0      		ldi r25,hi8(32)
 2880 0996 B801      		movw r22,r16
 2881 0998 0E94 0000 		call fputc
 2882 099c BB24      		clr r11
 2883               	.L147:
 555:../../freeRtos/Lib/ramdysk.c ****       for (tmp2=1; tmp2<8; tmp2++)
 2885               	.LM305:
 2886 099e 9394      		inc r9
 2887 09a0 0894      		sec
 2888 09a2 E11C      		adc r14,__zero_reg__
 2889 09a4 F11C      		adc r15,__zero_reg__
 2890 09a6 B92D      		mov r27,r9
 2891 09a8 B830      		cpi r27,lo8(8)
 2892 09aa 01F4      		brne .L148
 565:../../freeRtos/Lib/ramdysk.c ****       fprintf(ostream, "\t%d\t%d\r\n", 256*plik->rozmiarHi+plik->rozmiarLo,  plik->lAktOtw);
 2894               	.LM306:
 2895 09ac EDB7      		in r30,__SP_L__
 2896 09ae FEB7      		in r31,__SP_H__
 2897 09b0 3897      		sbiw r30,8
 2898 09b2 EDBF      		out __SP_L__,r30
 2899 09b4 FEBF      		out __SP_H__,r31
 2900 09b6 3196      		adiw r30,1
 2901 09b8 ADB7      		in r26,__SP_L__
 2902 09ba BEB7      		in r27,__SP_H__
 2903 09bc 1196      		adiw r26,1
 2904 09be 0D93      		st X+,r16
 2905 09c0 1C93      		st X,r17
 2906 09c2 1297      		sbiw r26,1+1
 2907 09c4 2282      		std Z+2,r2
 2908 09c6 3382      		std Z+3,r3
 2909 09c8 5A80      		ldd r5,Y+2
 2910 09ca 4424      		clr r4
 2911 09cc 8981      		ldd r24,Y+1
 2912 09ce 9201      		movw r18,r4
 2913 09d0 280F      		add r18,r24
 2914 09d2 311D      		adc r19,__zero_reg__
 2915 09d4 2483      		std Z+4,r18
 2916 09d6 3583      		std Z+5,r19
 2917 09d8 8B81      		ldd r24,Y+3
 2918 09da 8683      		std Z+6,r24
 2919 09dc 1782      		std Z+7,__zero_reg__
 2920 09de 0E94 0000 		call fprintf
 549:../../freeRtos/Lib/ramdysk.c ****     for (tmp=0; tmp<16; tmp++)
 2922               	.LM307:
 2923 09e2 8DB7      		in r24,__SP_L__
 2924 09e4 9EB7      		in r25,__SP_H__
 2925 09e6 0896      		adiw r24,8
 2926 09e8 8DBF      		out __SP_L__,r24
 2927 09ea 9EBF      		out __SP_H__,r25
 2928 09ec C615      		cp r28,r6
 2929 09ee D705      		cpc r29,r7
 2930 09f0 01F0      		breq .L145
 566:../../freeRtos/Lib/ramdysk.c ****       plik++;
 2932               	.LM308:
 2933 09f2 6096      		adiw r28,16
 2934 09f4 00C0      		rjmp .L149
 2935               	.L145:
 569:../../freeRtos/Lib/ramdysk.c ****     tmpKlaster = klastry[tmpKlaster];
 2937               	.LM309:
 2938 09f6 F601      		movw r30,r12
 2939 09f8 E050      		subi r30,lo8(-(klastry))
 2940 09fa F040      		sbci r31,hi8(-(klastry))
 2941 09fc 8081      		ld r24,Z
 571:../../freeRtos/Lib/ramdysk.c ****   while (tmpKlaster != tmpKlaster2);
 2943               	.LM310:
 2944 09fe 8A15      		cp r24,r10
 2945 0a00 01F0      		breq .+2
 2946 0a02 00C0      		rjmp .L151
 2947               	/* epilogue start */
 572:../../freeRtos/Lib/ramdysk.c **** }
 2949               	.LM311:
 2950 0a04 DF91      		pop r29
 2951 0a06 CF91      		pop r28
 2952 0a08 1F91      		pop r17
 2953 0a0a 0F91      		pop r16
 2954 0a0c FF90      		pop r15
 2955 0a0e EF90      		pop r14
 2956 0a10 DF90      		pop r13
 2957 0a12 CF90      		pop r12
 2958 0a14 BF90      		pop r11
 2959 0a16 AF90      		pop r10
 2960 0a18 9F90      		pop r9
 2961 0a1a 7F90      		pop r7
 2962 0a1c 6F90      		pop r6
 2963 0a1e 5F90      		pop r5
 2964 0a20 4F90      		pop r4
 2965 0a22 3F90      		pop r3
 2966 0a24 2F90      		pop r2
 2967 0a26 0895      		ret
 2974               	.Lscope22:
 2976               		.stabd	78,0,0
 2978               	.global	ramDyskLiczbaWolnychKlastrow
 2980               	ramDyskLiczbaWolnychKlastrow:
 2981               		.stabd	46,0,0
 575:../../freeRtos/Lib/ramdysk.c **** {
 2983               	.LM312:
 2984               	.LFBB23:
 2985               	/* prologue: function */
 2986               	/* frame size = 0 */
 2987               	/* stack size = 0 */
 2988               	.L__stack_usage = 0
 576:../../freeRtos/Lib/ramdysk.c ****   uint8_t wynik=0;
 2990               	.LM313:
 2991 0a28 E0E0      		ldi r30,lo8(klastry+128)
 2992 0a2a F0E0      		ldi r31,hi8(klastry+128)
 2993 0a2c 80E0      		ldi r24,lo8(0)
 2994               	.L155:
 579:../../freeRtos/Lib/ramdysk.c ****     if (klastry[temp] == 0)
 2996               	.LM314:
 2997 0a2e 9291      		ld r25,-Z
 2998 0a30 9923      		tst r25
 2999 0a32 01F4      		brne .L154
 580:../../freeRtos/Lib/ramdysk.c ****       wynik++;
 3001               	.LM315:
 3002 0a34 8F5F      		subi r24,lo8(-(1))
 3003               	.L154:
 578:../../freeRtos/Lib/ramdysk.c ****   for (temp = L_KLASTROW-1; temp > 0; temp--)
 3005               	.LM316:
 3006 0a36 90E0      		ldi r25,hi8(klastry+1)
 3007 0a38 E030      		cpi r30,lo8(klastry+1)
 3008 0a3a F907      		cpc r31,r25
 3009 0a3c 01F4      		brne .L155
 3010               	/* epilogue start */
 582:../../freeRtos/Lib/ramdysk.c **** }
 3012               	.LM317:
 3013 0a3e 0895      		ret
 3018               	.Lscope23:
 3020               		.stabd	78,0,0
 3026               	.global	ramDyskOtworzPlikStdIo
 3028               	ramDyskOtworzPlikStdIo:
 3029               		.stabd	46,0,0
 600:../../freeRtos/Lib/ramdysk.c **** 
 601:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskOtworzPlikStdIo(const char *nazwa, struct ramPlikFd *fd, FILE *stream, uint8_t flags
 602:../../freeRtos/Lib/ramdysk.c **** {
 3031               	.LM318:
 3032               	.LFBB24:
 3033 0a40 EF92      		push r14
 3034 0a42 FF92      		push r15
 3035 0a44 0F93      		push r16
 3036 0a46 1F93      		push r17
 3037 0a48 DF93      		push r29
 3038 0a4a CF93      		push r28
 3039 0a4c 0F92      		push __tmp_reg__
 3040 0a4e CDB7      		in r28,__SP_L__
 3041 0a50 DEB7      		in r29,__SP_H__
 3042               	/* prologue: function */
 3043               	/* frame size = 1 */
 3044               	/* stack size = 7 */
 3045               	.L__stack_usage = 7
 3046 0a52 8B01      		movw r16,r22
 3047 0a54 7A01      		movw r14,r20
 603:../../freeRtos/Lib/ramdysk.c ****   uint8_t wynik = ramDyskOtworzPlik(nazwa, fd);
 3049               	.LM319:
 3050 0a56 2983      		std Y+1,r18
 3051 0a58 0E94 0000 		call ramDyskOtworzPlik
 604:../../freeRtos/Lib/ramdysk.c ****   if (wynik != 0)
 3053               	.LM320:
 3054 0a5c 2981      		ldd r18,Y+1
 3055 0a5e 8823      		tst r24
 3056 0a60 01F4      		brne .L158
 605:../../freeRtos/Lib/ramdysk.c ****     return wynik;
 606:../../freeRtos/Lib/ramdysk.c ****   
 607:../../freeRtos/Lib/ramdysk.c ****   fdev_setup_stream(stream, putSTD, getSTD, flags);
 3058               	.LM321:
 3059 0a62 40E0      		ldi r20,lo8(gs(putSTD))
 3060 0a64 50E0      		ldi r21,hi8(gs(putSTD))
 3061 0a66 F701      		movw r30,r14
 3062 0a68 4087      		std Z+8,r20
 3063 0a6a 5187      		std Z+9,r21
 3064 0a6c 40E0      		ldi r20,lo8(gs(getSTD))
 3065 0a6e 50E0      		ldi r21,hi8(gs(getSTD))
 3066 0a70 4287      		std Z+10,r20
 3067 0a72 5387      		std Z+11,r21
 3068 0a74 2383      		std Z+3,r18
 608:../../freeRtos/Lib/ramdysk.c ****   fdev_set_udata(stream, fd);
 3070               	.LM322:
 3071 0a76 0487      		std Z+12,r16
 3072 0a78 1587      		std Z+13,r17
 3073               	.L158:
 3074               	/* epilogue start */
 609:../../freeRtos/Lib/ramdysk.c ****   return 0;
 610:../../freeRtos/Lib/ramdysk.c **** }
 3076               	.LM323:
 3077 0a7a 0F90      		pop __tmp_reg__
 3078 0a7c CF91      		pop r28
 3079 0a7e DF91      		pop r29
 3080 0a80 1F91      		pop r17
 3081 0a82 0F91      		pop r16
 3082 0a84 FF90      		pop r15
 3083 0a86 EF90      		pop r14
 3084 0a88 0895      		ret
 3089               	.Lscope24:
 3091               		.stabd	78,0,0
 3094               	.global	ramDyskZamknijPlikStdIo
 3096               	ramDyskZamknijPlikStdIo:
 3097               		.stabd	46,0,0
 611:../../freeRtos/Lib/ramdysk.c **** 
 612:../../freeRtos/Lib/ramdysk.c **** uint8_t ramDyskZamknijPlikStdIo(FILE *stream)
 613:../../freeRtos/Lib/ramdysk.c **** {
 3099               	.LM324:
 3100               	.LFBB25:
 3101 0a8a 0F93      		push r16
 3102 0a8c 1F93      		push r17
 3103 0a8e CF93      		push r28
 3104 0a90 DF93      		push r29
 3105               	/* prologue: function */
 3106               	/* frame size = 0 */
 3107               	/* stack size = 4 */
 3108               	.L__stack_usage = 4
 3109 0a92 8C01      		movw r16,r24
 614:../../freeRtos/Lib/ramdysk.c ****   struct ramPlikFd *fd = (struct ramPlikFd *)(fdev_get_udata(stream));
 3111               	.LM325:
 3112 0a94 FC01      		movw r30,r24
 3113 0a96 C485      		ldd r28,Z+12
 3114 0a98 D585      		ldd r29,Z+13
 615:../../freeRtos/Lib/ramdysk.c ****   ramDyskZamknijPlik(fd);
 3116               	.LM326:
 3117 0a9a CE01      		movw r24,r28
 3118 0a9c 0E94 0000 		call ramDyskZamknijPlik
 616:../../freeRtos/Lib/ramdysk.c ****   fclose(stream);
 3120               	.LM327:
 3121 0aa0 C801      		movw r24,r16
 3122 0aa2 0E94 0000 		call fclose
 617:../../freeRtos/Lib/ramdysk.c ****   return fd->wpis->lAktOtw;
 3124               	.LM328:
 3125 0aa6 EC81      		ldd r30,Y+4
 3126 0aa8 FD81      		ldd r31,Y+5
 618:../../freeRtos/Lib/ramdysk.c **** }
 3128               	.LM329:
 3129 0aaa 8381      		ldd r24,Z+3
 3130               	/* epilogue start */
 3131 0aac DF91      		pop r29
 3132 0aae CF91      		pop r28
 3133 0ab0 1F91      		pop r17
 3134 0ab2 0F91      		pop r16
 3135 0ab4 0895      		ret
 3140               	.Lscope25:
 3142               		.stabd	78,0,0
 3143               		.comm wwwport,1,1
 3144               		.comm rollers,2,1
 3145               		.comm xSemaphoreSpiSS,2,1
 3146               		.comm portA,1,1
 3147               		.comm portB,1,1
 3148               		.comm lockSensors,2,1
 3149               		.comm xSemaphoreRs485,2,1
 3150               		.comm nicState,14,1
 3151               		.comm plen,2,1
 3152               		.comm IpMyConfig,15,1
 3153               		.comm arpDebug,2,1
 3154               		.comm arpDebugLevel,1,1
 3155               		.comm icmpDebug,2,1
 3156               		.comm icmpDebugLevel,1,1
 3157               		.comm udpSocket,2,1
 3158               		.comm udpDbgStream,2,1
 3159               		.comm udpDbgLevel,1,1
 3160               		.comm tcpDebugStream,2,1
 3161               		.comm tcpDebugLevel,1,1
 3162               		.comm sockets,2,1
 3163               		.comm czasRtc,7,1
 3164               		.comm klastry,128,1
 3188               	.Letext0:
 3189               	.global __do_copy_data
 3190               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:00000000 ramdysk.c
     /tmp/ccMqfvuu.s:2      *ABS*:0000003f __SREG__
     /tmp/ccMqfvuu.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccMqfvuu.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccMqfvuu.s:5      *ABS*:00000034 __CCP__
     /tmp/ccMqfvuu.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccMqfvuu.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccMqfvuu.s:563    .text:00000000 uaktualnijRozmiarPliku
     /tmp/ccMqfvuu.s:628    .text:00000046 czyscKlaster
     /tmp/ccMqfvuu.s:660    .text:0000005e znajdzWolnyKlaster
                            *COM*:00000080 klastry
     /tmp/ccMqfvuu.s:716    .text:00000088 nastepnyKlaster
     /tmp/ccMqfvuu.s:790    .text:000000ce znajdzKlasterN
     /tmp/ccMqfvuu.s:847    .text:000000fa znajdzPlik
     /tmp/ccMqfvuu.s:1024   .text:000001cc ramDyskInit
     /tmp/ccMqfvuu.s:1065   .text:000001f0 ramDyskUtworzPlik
     /tmp/ccMqfvuu.s:1274   .text:000002e2 ramDyskOtworzPlik
     /tmp/ccMqfvuu.s:1342   .text:00000320 ramDyskUsunPlik
     /tmp/ccMqfvuu.s:1428   .text:0000036a ramDyskZamknijPlik
     /tmp/ccMqfvuu.s:1467   .text:00000388 ramDyskCzyscPlik
     /tmp/ccMqfvuu.s:1558   .text:000003e4 ramDyskZapiszBajtDoPliku
     /tmp/ccMqfvuu.s:1676   .text:00000460 putSTD
     /tmp/ccMqfvuu.s:1707   .text:00000472 ramDyskCzytajBajtZPliku
     /tmp/ccMqfvuu.s:1821   .text:000004e2 getSTD
     /tmp/ccMqfvuu.s:1878   .text:00000514 ramDyskZapiszBlokDoPliku
     /tmp/ccMqfvuu.s:2104   .text:00000624 ramDyskCzytajBlokZPliku
     /tmp/ccMqfvuu.s:2381   .text:00000766 ramDyskUstawWskaznik
     /tmp/ccMqfvuu.s:2510   .text:000007f0 ramDyskUstawWskaznikNaKoniec
     /tmp/ccMqfvuu.s:2583   .text:00000834 ramDyskDodajBlokXmodem
     /tmp/ccMqfvuu.s:2769   .text:0000090a ramDyskDir
     /tmp/ccMqfvuu.s:2980   .text:00000a28 ramDyskLiczbaWolnychKlastrow
     /tmp/ccMqfvuu.s:3028   .text:00000a40 ramDyskOtworzPlikStdIo
     /tmp/ccMqfvuu.s:3096   .text:00000a8a ramDyskZamknijPlikStdIo
                            *COM*:00000001 wwwport
                            *COM*:00000002 rollers
                            *COM*:00000002 xSemaphoreSpiSS
                            *COM*:00000001 portA
                            *COM*:00000001 portB
                            *COM*:00000002 lockSensors
                            *COM*:00000002 xSemaphoreRs485
                            *COM*:0000000e nicState
                            *COM*:00000002 plen
                            *COM*:0000000f IpMyConfig
                            *COM*:00000002 arpDebug
                            *COM*:00000001 arpDebugLevel
                            *COM*:00000002 icmpDebug
                            *COM*:00000001 icmpDebugLevel
                            *COM*:00000002 udpSocket
                            *COM*:00000002 udpDbgStream
                            *COM*:00000001 udpDbgLevel
                            *COM*:00000002 tcpDebugStream
                            *COM*:00000001 tcpDebugLevel
                            *COM*:00000002 sockets
                            *COM*:00000007 czasRtc

UNDEFINED SYMBOLS
strncmp
strncpy
memcpy
fputs
fputc
fprintf
fclose
__do_copy_data
__do_clear_bss
